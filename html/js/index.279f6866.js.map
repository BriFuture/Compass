{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?5b85","webpack:///./src/App.vue?cc73","webpack:///./src/components/Sidebar.vue?80af","webpack:///./src/compass/Variables.js","webpack:///./src/compass/PaintObj.js","webpack:///./src/compass/Coord.js","webpack:///./src/compass/Scene.js","webpack:///./src/compass/SensorPoint.js","webpack:///./src/compass/Craft.js","webpack:///./src/compass/Sphere.js","webpack:///./src/assets/SPVertexCode.vsh","webpack:///./src/assets/SPFragCode.fsh","webpack:///./src/compass/SpacePath.js","webpack:///./src/states.js","webpack:///./src/components/CameraSetting.vue?1b50","webpack:///src/components/CameraSetting.vue","webpack:///./src/components/CameraSetting.vue?f90e","webpack:///./src/components/CameraSetting.vue","webpack:///./src/components/SphereSetting.vue?23ea","webpack:///src/components/SphereSetting.vue","webpack:///./src/components/SphereSetting.vue?1d08","webpack:///./src/components/SphereSetting.vue","webpack:///./src/components/CraftSetting.vue?5df0","webpack:///src/components/CraftSetting.vue","webpack:///./src/components/CraftSetting.vue?3763","webpack:///./src/components/CraftSetting.vue","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?7ef4","webpack:///./src/components/Sidebar.vue","webpack:///./src/components/Information.vue?d59a","webpack:///src/components/Information.vue","webpack:///./src/components/Information.vue?6735","webpack:///./src/components/Information.vue","webpack:///./src/components/DebugPanel.vue?ccad","webpack:///src/components/DebugPanel.vue","webpack:///./src/components/DebugPanel.vue?4920","webpack:///./src/components/DebugPanel.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/CraftSetting.vue?1714"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","index","jsonpScriptSrc","p","chunk-2d221f75","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","undefined","setTimeout","head","appendChild","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_459ada90_render","_vm","this","_h","$createElement","_c","_self","attrs","fluid","id","ref","width","canvasWidth","height","canvasHeight","staticClass","style","cols","md","lg","directives","rawName","expression","model","callback","$$v","showSidebar","_v","showDebugInfo","on","valueChanged","$event","debugValueChanged","staticRenderFns","Sidebarvue_type_template_id_06d46ce0_render","change","setSceneRun","scene","$set","craft","initCraft","header","sensorPath","click","resetPath","_s","pathWidth","min","max","setPathWidth","refCircle","recordPoint","resetRecordedPoint","indicatorSize","toFixed","setIndicatorSize","size","step","setRefCircleSize","camera","sphere","Sidebarvue_type_template_id_06d46ce0_staticRenderFns","states","gl","attitude","heading","pitch","roll","attributes","uniforms","PaintObj","props","classCallCheck","sides","alpha","color","buffers","mMatrix","mat4","pvMatrix","mvpMatrix","quat","vscale","vec3","fromValues","translation","visible","_x","_y","_z","_rotateX","_rotateY","_rotateZ","drawtype","buffer","createBuffer","ELEMENT_ARRAY_BUFFER","itemSize","Float32Array","ARRAY_BUFFER","numItems","bindBuffer","bufferData","offset","bufferSubData","cylinderShape","radius","segment","bottom","circleShape","upper","Math","PI","vertex","concat","thetaStart","thetaEnd","pos","x","y","z","start","end","dtheta","cos","sin","rotateVertex","theta","beta","dis","v","set","rotateY","rotateZ","degToRad","deg","genVertices","normal","vertices","coordCarte","phi","st","ct","sp","cp","Coord","_this","possibleConstructorReturn","getPrototypeOf","init","xcoord","xvertices","ycoord","yvertices","zcoord","zvertices","createArrayBuffer","STATIC_DRAW","Uint16Array","uniform1f","uniformMatrix4fv","m_matrix","pmv_matrix","vertexAttribPointer","vertex_position","FLOAT","vertex_normal","drawElements","TRIANGLES","UNSIGNED_SHORT","matrix","mul","Camera","defaultTheta","defaultPhi","defaultDis","defaultViewWidth","defaultViewHeight","up","lookat","pMatrix","vMatrix","setSize","lookAt","watcher","a_theta","a_phi","update","viewport","perspective","rotate","Scene","enable","DEPTH_TEST","depthFunc","LESS","CULL_FACE","cullFace","BACK","clearColor","clearDepth","pixelStorei","UNPACK_FLIP_Y_WEBGL","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","objs","light_direct","obj","first","unshift","log","recv","onViewChanged","running","scope","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","paint","requestAnimationFrame","codestr","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","vertexCode","fragCode","shaderProgram","createProgram","vertexShader","getShader","VERTEX_SHADER","attachShader","fragShader","FRAGMENT_SHADER","_onShaderReady","linkProgram","useProgram","getAttribLocation","enableVertexAttribArray","texture","getUniformLocation","n_matrix","frag_color","has_texture","light_direction","specColor","vertexColor","uniform3fv","SensorPoint","inv_color","headingOffset","callbacks","cylinder","index_count","vertexBuffer","indexBuffer","fromEuler","params","setTranslation","fromRotationTranslationScale","spherical","onSphericalChanged","cb","u","setParam","PathBytes","IndexBytes","PathSegment","SensorPath","_this2","MaxPathIndexNum","all_index_count","cur_path_count","cur_index_count","cur_pi","buffer_path_bytes","buffer_index_bytes","gap","pg","angle","last_point","path","lp","s1","s2","n0","cross","normalize","scale","pushVertex","lpos","dist","_updateBuffer","nangle","langle","presult","getLinearPoint","subBuffer","info","resetCurrentPath","vec","args","deleteBuffer","RecordPoint","_this3","max_vertex","vertex_count","DYNAMIC_DRAW","point","Craft","setScale","pitchOffset","rollOffset","objPromise","then","mesh","OBJ","Mesh","default","initMeshBuffers","uniform1i","textures","textureBuffer","disableVertexAttribArray","textureCoordAttribute","normalBuffer","fromScaling","rotateX","setRotation","Sphere","MODE_SURFACE","MODE_LINE","MODE_LESSLINE","DEFAULT_RADIUS","vn","hn","drawMode","line_alpha","res","getVertex","getIndex","vertex_index","lineIndexBuffer","line_index","lessLineIndexBuffer","less_line_index","lessLSIndexBuffer","less_ls_index","LINES","k","vertexIndex","lineIndex","lessLineIndex","lessLSIndex","DeltaRad","RefCircle","current","green","blue","circles","SingleReferCircle","initSize","abs","setCurrent","unsetCurrent","setQuat","originColor","a_beta","LINE_LOOP","SPVertexCode","SPFragCode","SpacePath","createClass","canvasGL","initShaders","addCamera","coord","add","canvas","pixelRatio","devicePixelRatio","currentWidth","currentHeight","render","sensorPoint","reset","resetAllPath","addIndicator","addSensorPath","addRefCircle","addRecordPoint","addSphere","addSphericalChange","pixelSize","Qt","spacepath","radToDeg","rad","cameraParam","dwy","wratio","dragged","dx","dy","lastPos","curPos","yratio","xratio","wheelScroll","deltaY","preventDefault","onMouseUp","onMouseMove","getMousePos","onMouseDown","canvasDom","mouseEvent","rect","getBoundingClientRect","clientX","left","clientY","top","CameraSettingvue_type_template_id_3d567faa_render","resetCamera","cameraTheta","cameraThetaChanged","cameraPhi","cameraPhiChanged","cameraDis","cameraDisChanged","sphereCoord","CameraSettingvue_type_template_id_3d567faa_staticRenderFns","CameraSettingvue_type_script_lang_js_","computed","methods","components_CameraSettingvue_type_script_lang_js_","component","componentNormalizer","CameraSetting","SphereSettingvue_type_template_id_459c62c8_render","class","nopadding","slot","sphereRadiusChanged","sphereAlpha","parseFloat","label","_e","SphereSettingvue_type_template_id_459c62c8_staticRenderFns","SphereSettingvue_type_script_lang_js_","components_SphereSettingvue_type_script_lang_js_","SphereSetting_component","SphereSetting","CraftSettingvue_type_template_id_7a408ae6_render","paintCraft","disable","setCraftSize","changeHeadingOffset","changePitchOffset","changeRollOffset","CraftSettingvue_type_template_id_7a408ae6_staticRenderFns","CraftSettingvue_type_script_lang_js_","$emit","parse_float_default","components_CraftSettingvue_type_script_lang_js_","CraftSetting_component","CraftSetting","craftObj","Sidebarvue_type_script_lang_js_","components","indicator","record","msg","stringify_default","$socket","send","resetRecord","addCraft","mounted","main","components_Sidebarvue_type_script_lang_js_","Sidebar_component","Sidebar","Informationvue_type_template_id_567c7bd0_render","Informationvue_type_template_id_567c7bd0_staticRenderFns","Informationvue_type_script_lang_js_","components_Informationvue_type_script_lang_js_","Information_component","Information","DebugPanelvue_type_template_id_230ee897_render","DebugPanelvue_type_template_id_230ee897_staticRenderFns","DebugPanelvue_type_script_lang_js_","components_DebugPanelvue_type_script_lang_js_","DebugPanel_component","DebugPanel","Appvue_type_script_lang_js_","CSidebar","CInformation","CDebugPanel","created","$debug","$refs","getContext","depth","antilias","defaultInit","panel","addEventListener","innerWidth","innerHeight","registerSockets","setAttitude","$options","sockets","onmessage","JSON","parse","idx","status","connect","feedHPR","action","emit","src_Appvue_type_script_lang_js_","App_component","App","Vue","use","BootstrapVue","wsPort","namespace","socketIOAddr","VueNativeSock","format","config","productionTip","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_CraftSetting_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_CraftSetting_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/index.279f6866.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2d221f75\":\"9d307733\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\",\"id\":\"app\"}},[_c('canvas',{ref:\"canvas\",attrs:{\"id\":\"canvas\",\"width\":_vm.canvasWidth,\"height\":_vm.canvasHeight}}),_c('div',[_c('b-row',{staticClass:\"panel\"},[_c('b-col',{staticClass:\"full-height px-0 float-right subpanel\",style:({'height':_vm.canvasHeight+'px'}),attrs:{\"cols\":\"6\",\"md\":\"3\",\"lg\":\"2\"}},[_c('c-sidebar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSidebar),expression:\"showSidebar\"}],ref:\"sidebar\"})],1),_c('b-col',{ref:\"panel\",attrs:{\"cols\":\"6\",\"md\":\"6\",\"lg\":\"8\"}},[_c('b-checkbox',{staticClass:\"d-inline-block mx-4\",model:{value:(_vm.showSidebar),callback:function ($$v) {_vm.showSidebar=$$v},expression:\"showSidebar\"}},[_vm._v(\"显示控制面板\")]),_c('b-checkbox',{staticClass:\"d-inline-block mx-4\",model:{value:(_vm.showDebugInfo),callback:function ($$v) {_vm.showDebugInfo=$$v},expression:\"showDebugInfo\"}},[_vm._v(\"显示调试信息\")])],1),_c('b-col',{staticClass:\"full-height\",style:({'height':_vm.canvasHeight+'px'}),attrs:{\"cols\":\"6\",\"md\":\"3\",\"lg\":\"2\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDebugInfo),expression:\"showDebugInfo\"}],staticClass:\"subpanel\"},[_c('c-debug-panel',{attrs:{\"data\":_vm.data},on:{\"valueChanged\":function($event){return _vm.debugValueChanged($event)}}}),_c('c-information',{attrs:{\"data\":_vm.data}})],1)])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-checkbox',{on:{\"change\":function($event){return _vm.setSceneRun($event)}},model:{value:(_vm.scene.running),callback:function ($$v) {_vm.$set(_vm.scene, \"running\", $$v)},expression:\"scene.running\"}},[_vm._v(\"实时更新 3D 图像\")]),_c('craft-setting',{attrs:{\"craft\":_vm.craft},on:{\"initCraft\":function($event){return _vm.initCraft()}}}),_c('b-card',{attrs:{\"header\":\"其他参数设置\"}},[_c('div',{staticClass:\"option\"},[_c('b-checkbox',{model:{value:(_vm.sensorPath.visible),callback:function ($$v) {_vm.$set(_vm.sensorPath, \"visible\", $$v)},expression:\"sensorPath.visible\"}},[_vm._v(\"绘制路径\")]),_c('b-btn',{on:{\"click\":function($event){return _vm.resetPath()}}},[_vm._v(\"重置路径\")]),_c('div',[_vm._v(\"轨迹宽度 \"+_vm._s(_vm.pathWidth)+\"\\r\\n        \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"pathWidth\",\"value\":_vm.pathWidth,\"min\":\"1\",\"max\":\"100\"},on:{\"change\":function($event){return _vm.setPathWidth($event)}}})],1),_c('b-checkbox',{model:{value:(_vm.refCircle.visible),callback:function ($$v) {_vm.$set(_vm.refCircle, \"visible\", $$v)},expression:\"refCircle.visible\"}},[_vm._v(\"显示修正圆圈\")])],1),_c('div',{staticClass:\"action\"},[_c('b-btn',{staticClass:\"mx-4\",on:{\"click\":function($event){return _vm.recordPoint()}}},[_vm._v(\"打点\")]),_c('b-btn',{staticClass:\"mx-4\",on:{\"click\":function($event){return _vm.resetRecordedPoint()}}},[_vm._v(\"重置打点\")])],1),_c('div',[_vm._v(\"指示器大小: \"+_vm._s(_vm.indicatorSize.toFixed(1))+\"\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"indicatorSize\",\"value\":_vm.indicatorSize,\"min\":\"1\",\"max\":\"100\"},on:{\"change\":function($event){return _vm.setIndicatorSize($event)}}})],1),_c('div',{},[_vm._v(\"修正圆圈大小\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"refCircleSize\",\"value\":_vm.refCircle.size,\"min\":\"0.1\",\"max\":\"1\",\"step\":\"0.01\"},on:{\"change\":function($event){return _vm.setRefCircleSize($event)}}})],1)]),_c('camera-setting',{attrs:{\"camera\":_vm.camera}}),_c('sphere-setting',{attrs:{\"sphere\":_vm.sphere}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var states = {\r\n  gl: \"not initialized\",\r\n};\r\n\r\nvar attitude = {\r\n  heading: 0,\r\n  pitch: 0,\r\n  roll: 0\r\n}\r\n\r\nvar attributes = {};  // attribute variables from shader\r\nvar uniforms = {};    // uniform variables from shader\r\nexport {states, uniforms, attributes, attitude};","import {states} from './Variables'\r\n/**\r\n* 所有需要绘制的对象在构造时需要调用此函数对参数进行初始化\r\n**/\r\nclass PaintObj {\r\n  constructor(props) {\r\n    if (props === undefined) {\r\n      props = {};\r\n    }\r\n    this.sides = props.sides || 24;\r\n    this.alpha = props.alpha || 1.0;\r\n    this.color = props.color || [0.8, 0.8, 0.8];\r\n    this.size = props.size || 1.0;\r\n    this.gl = props.gl;\r\n    this.buffers = {};\r\n    this.mMatrix = mat4.create();\r\n    this.pvMatrix = mat4.create();\r\n    this.mvpMatrix = mat4.create();\r\n    this.quat = quat.create();\r\n    this.vscale = vec3.fromValues(1.0, 1.0, 1.0); // vec3.create equals to fromValues(0.0, 0.0, 0.0)\r\n    this.translation = vec3.create();\r\n    this.visible = true;\r\n    this._x = 0;\r\n    this._y = 0;\r\n    this._z = 0;\r\n    this._rotateX = 0;\r\n    this._rotateY = 0;\r\n    this._rotateZ = 0;\r\n  }\r\n\r\n  /**\r\n  * @param {*} data  数组或 long 型整数\r\n  * @param {*} drawtype  STATIC or DYNAMIC\r\n  * @param {*} type  ELEMENT or ARRAY\r\n  */\r\n  createArrayBuffer(data, drawtype, type) {\r\n    var buffer = states.gl.createBuffer();\r\n\r\n    if (type === undefined) {\r\n      type = states.gl.ELEMENT_ARRAY_BUFFER;\r\n      buffer.itemSize = data.itemSize || 1;\r\n      if (data instanceof Float32Array) {\r\n        type = states.gl.ARRAY_BUFFER;\r\n        buffer.itemSize = data.itemSize || 3;\r\n      }\r\n      buffer.numItems = data.length / buffer.itemSize;\r\n    }\r\n\r\n    states.gl.bindBuffer(type, buffer);\r\n    states.gl.bufferData(type, data, drawtype);\r\n    states.gl.bindBuffer(type, null);\r\n    return buffer;\r\n  }\r\n\r\n  \r\n  subBuffer(buffer, offset, data) {\r\n    var type = states.gl.ELEMENT_ARRAY_BUFFER;\r\n    if (data instanceof Float32Array) {\r\n      type = states.gl.ARRAY_BUFFER;\r\n    }\r\n    // console.log(type, offset + data.length)\r\n    states.gl.bindBuffer(type, buffer);\r\n    states.gl.bufferSubData(type, offset, data);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n* 计算出圆柱体需要的顶点和索引\r\n**/\r\nfunction cylinderShape(radius, segment, height) {\r\n  var bottom = circleShape(radius, segment);\r\n  var upper = circleShape(radius, segment, 0, Math.PI * 2, height);\r\n  var vertex = bottom.concat(upper);\r\n\r\n  var index = [];\r\n  var i = 0;\r\n  // bottom\r\n  for (i = 1; i < segment; i++) {\r\n    index.push(0, i + 1, i);\r\n  }\r\n  index.push(0, 1, i);\r\n\r\n  // upper\r\n  for (i = segment + 2; i < 2 * segment + 1; i++) {\r\n    index.push(segment + 1, i, i + 1);\r\n  }\r\n  index.push(segment + 1, i, segment + 2);\r\n\r\n  // side\r\n  for (i = 1; i < segment; i++) {\r\n    index.push(segment + 1 + i, i, i + 1);\r\n    index.push(segment + i + 1, i + 1, segment + i + 2);\r\n  }\r\n  index.push(segment + 1 + i, i, 1);\r\n  index.push(segment + i + 1, 1, segment + 2);\r\n\r\n  return {\r\n    vertex: vertex,\r\n    index: index\r\n  }\r\n}\r\n\r\n/**\r\n* calculate circle on the plane xoy with given sides and distance between each vertex and origin point\r\n* Note that the origin point is the first element of the array and\r\n* the direction of the circle is anti-clock viewed from Z+ to Z-\r\n*\r\n* @return vertex.size = (segment+1) * 3\r\n*/\r\nfunction circleShape(radius, segment, thetaStart, thetaEnd, pos) {\r\n  var vertex = [];\r\n  var x = 0.0;\r\n  var y = 0.0;\r\n  var z = pos || 0.0;\r\n  var start = thetaStart || 0;\r\n  var end = thetaEnd || Math.PI * 2;\r\n\r\n  var dtheta = (end - start) / segment;\r\n  vertex = vertex.concat([x, y, 0.0]);\r\n  for (var i = 0; i < segment; i++) {\r\n    x = Math.cos(i * dtheta + start) * radius;\r\n    y = Math.sin(i * dtheta + start) * radius;\r\n    vertex = vertex.concat([x, y, z]);\r\n  }\r\n  return vertex;\r\n}\r\n\r\n\r\n\r\n/**\r\n*  @param {Array} vertex  the vertices to rotate around the origin point\r\n*  @param {Number}   theta is in terms of RAD\r\n*  @param {Number}   beta  is in terms of RAD\r\n*  @desc 将所有顶点按照世界坐标轴 Y 轴，Z 轴依次进行 theta 角和 beta 角的旋转\r\n**/\r\nfunction rotateVertex(vertex, theta, beta, dis) {\r\n  var v = vec3.create();\r\n  var d = dis || 0;\r\n  for (var i = 0; i < vertex.length; i += 3) {\r\n    vec3.set(v, vertex[i + 0], vertex[i + 1], vertex[i + 2] + d);\r\n    vec3.rotateY(v, v, [0, 0, 0], theta);\r\n    vec3.rotateZ(v, v, [0, 0, 0], beta);\r\n    vertex[i + 0] = v[0];\r\n    vertex[i + 1] = v[1];\r\n    vertex[i + 2] = v[2];\r\n  }\r\n  //    return vertex;\r\n}\r\n\r\n\r\nfunction degToRad(deg) {\r\n  return deg * Math.PI / 180;\r\n}\r\n\r\n\r\n/**\r\n* 用更紧凑的方式得到顶点信息的数组，\r\n* 认为每 9 个数据表示一个顶点、颜色和法向量数据，\r\n* 可根据 color，normal 的长度自动进行颜色的复制\r\n**/\r\nfunction genVertices(vertex, color, normal) {\r\n  var vertices = [];\r\n  var i = 0;\r\n  if (color.length <= 3) {\r\n    if (normal === undefined) {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[0], color[1], color[2]);\r\n      }\r\n    } else if (normal.length <= 3) {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[0], color[1], color[2]);\r\n        vertices = vertices.concat(normal[0], normal[1], normal[2]);\r\n      }\r\n    } else {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[0], color[1], color[2]);\r\n        vertices = vertices.concat(normal[i], normal[i + 1], normal[i + 2]);\r\n      }\r\n    }\r\n  } else {\r\n    if (normal === undefined) {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[i], color[i + 1], color[i + 2]);\r\n      }\r\n    } else if (normal.length <= 3) {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[i], color[i + 1], color[i + 2]);\r\n        vertices = vertices.concat(normal[0], normal[1], normal[2]);\r\n      }\r\n    } else {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[i], color[i + 1], color[i + 2]);\r\n        vertices = vertices.concat(normal[i], normal[i + 1], normal[i + 2]);\r\n      }\r\n    }\r\n  }\r\n\r\n  return vertices;\r\n}\r\n\r\n\r\n/**\r\n* 假设球心即为原点，将球极坐标系转换成平面直角坐标系\r\n* @param   theta {Numer}    Rad 弧度制，球心到顶点的连线与 Z 轴正方向的夹角为 theta\r\n* @param   phi  {Numer}    Rad 弧度制，球心到顶点的连线在 xoy 平面上的投影与 X 轴正方向的夹角为 phi\r\n* @param   r     {Number}  球半径\r\n* @return  {vec3}    顶点的坐标，表示\r\n*/\r\nfunction coordCarte(theta, phi, r) {\r\n  var st = Math.sin(theta);\r\n  var ct = Math.cos(theta);\r\n  var sp = Math.sin(phi);\r\n  var cp = Math.cos(phi);\r\n  var x = r * st * cp;\r\n  var y = r * st * sp;\r\n  var z = r * ct;\r\n  // return [x, y, z]\r\n  return vec3.fromValues(x, y, z);\r\n}\r\n\r\nexport {PaintObj, cylinderShape, circleShape, rotateVertex, degToRad, genVertices,\r\n  coordCarte\r\n};","import {PaintObj, cylinderShape, rotateVertex, degToRad, genVertices} from './PaintObj'\r\nimport {states, uniforms, attributes} from './Variables'\r\n/**\r\n* Coord Object\r\n* 用于绘制坐标轴\r\n**/\r\nclass Coord extends PaintObj {\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"Coord\";\r\n    this.length = 10.0;\r\n    this.init();\r\n  }\r\n  \r\n  init() {\r\n    var xcoord = cylinderShape(0.01, this.sides, this.length);\r\n    rotateVertex(xcoord.vertex, degToRad(90), 0);\r\n    var xvertices = genVertices(xcoord.vertex, [0.9, 0.1, 0.0], [1.0, 1.0, 1.0]);\r\n\r\n    var ycoord = cylinderShape(0.01, this.sides, this.length);\r\n    rotateVertex(ycoord.vertex, degToRad(90), degToRad(90));\r\n    var yvertices = genVertices(ycoord.vertex, [0.0, 0.9, 0.0], [1.0, 1.0, 1.0]);\r\n\r\n    var zcoord = cylinderShape(0.01, this.sides, this.length);\r\n    var zvertices = genVertices(zcoord.vertex, [0.0, 0.0, 0.9], [1.0, 1.0, 1.0]);\r\n\r\n    var vertices = [];\r\n    vertices = vertices.concat(xvertices);\r\n    vertices = vertices.concat(yvertices);\r\n    vertices = vertices.concat(zvertices);\r\n\r\n    var index = [];\r\n    index = index.concat(xcoord.index);\r\n    //        index = index.concat( ycoord.index );\r\n    var length = 2 * this.sides + 2;\r\n    for (var i = 0; i < ycoord.index.length; i++) {\r\n      index.push(length + ycoord.index[i]);\r\n    }\r\n    //        index = index.concat( zcoord.index );\r\n    length = 4 * this.sides + 4;\r\n    for (var i = 0; i < zcoord.index.length; i++) {\r\n      index.push(length + zcoord.index[i]);\r\n    }\r\n    this.buffers.vertex = this.createArrayBuffer(new Float32Array(vertices), states.gl.STATIC_DRAW);\r\n    this.buffers.index = this.createArrayBuffer(new Uint16Array(index), states.gl.STATIC_DRAW);\r\n    this.buffers.index.numItems = index.length;\r\n  }\r\n\r\n  paint() {\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n    // console.log(\"Coord\", this)\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.buffers.vertex);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 9 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 9 * 4, 3 * 4);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 9 * 4, 6 * 4);\r\n    states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.buffers.index);\r\n    states.gl.drawElements(states.gl.TRIANGLES, this.buffers.index.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n    // this.paint()\r\n  }\r\n}\r\n// end of Coord prototype\r\n\r\nexport default Coord","import {states, attributes, uniforms} from './Variables'\r\nimport {coordCarte, degToRad} from './PaintObj'\r\n\r\n/**\r\n* @class Camera\r\n* @desc  透视角度摄像机，通过该类控制视窗变化\r\n*    设置 pos 改变摄像机的位置\r\n*    设置 up  改变摄像机的上方向\r\n*    设置 lookat 改变摄像机的视点\r\n* 摄像机对象维护 pvMatrix，并会在视图矩阵更新时通知相关联的 watcher 对象，\r\n* 若没有设置 watcher 对象则不会更新视图。\r\n* 默认摄像机的 lookat 一直是 [0, 0, 0] 原点，up 是 Z 轴方向\r\n**/\r\nclass Camera {\r\n  defaultTheta = 45\r\n  defaultPhi = 45\r\n  defaultDis = 15\r\n  defaultViewWidth = 800\r\n  defaultViewHeight = 600\r\n\r\n  constructor(props) {\r\n    //    PaintObj.call( this );\r\n    this.type = \"Camera\";\r\n    \r\n    this.theta = props.theta || this.defaultTheta;\r\n    this.theta = degToRad(this.theta);\r\n    this.phi = props.phi || this.defaultPhi;\r\n    this.phi = degToRad(this.phi);\r\n    this.dis = props.dis || this.defaultDis;\r\n\r\n    this.width = props.width || this.defaultViewWidth;\r\n    this.height = props.height || this.defaultViewHeight;\r\n    this.pos = coordCarte(this.theta, this.phi, this.dis);\r\n    this.up = vec3.fromValues(0, 0, 1);\r\n    this.lookat = vec3.fromValues(0, 0, 0);\r\n    this.pMatrix = mat4.create();\r\n    this.vMatrix = mat4.create();\r\n    this.pvMatrix = mat4.create();\r\n    \r\n    this.setSize(this.width, this.height);\r\n  }\r\n\r\n  /**\r\n    * @desc 更新视图矩阵并通知 watcher 对象 pvMatrix 已更新\r\n  **/\r\n  update() {\r\n    mat4.lookAt(this.vMatrix, this.pos, this.lookat, this.up);\r\n    mat4.mul(this.pvMatrix, this.pMatrix, this.vMatrix);\r\n    if (this.watcher !== undefined) {\r\n      this.watcher(this.pvMatrix);\r\n    }\r\n  }\r\n\r\n  /**\r\n  * 设置 watcher 对象\r\n  **/\r\n  recv(watcher) {\r\n    this.watcher = watcher;\r\n  }\r\n\r\n  /**\r\n  * 设置摄像机的旋转操作\r\n  * @param a_theta  用角度制表示的 theta 角，与 Z 轴正半轴的夹角,\r\n  *   [0, 180]，为了便于区分参数中的角度制和弧度制，在变量名前加 a 表示角度制\r\n  * @param a_phi 用角度制表示的 phi 角， 与 X 轴正半轴的夹角，[0, 360]\r\n  * @param r  到原点的距离\r\n  * @note  some problem occurred when x or y equals to zero\r\n  *    because you can't set up [0, 0, 1] and look at [0, 0, 0] the origin point.\r\n  **/\r\n  rotate(a_theta, a_phi, r) {\r\n    if(a_theta) {\r\n      if (a_theta < 0.01) {\r\n        a_theta = 0.01;\r\n      } else if (a_theta > 179.99) {\r\n        a_theta = 179.99;\r\n      }\r\n      this.theta = degToRad(a_theta);\r\n    }\r\n    if(a_phi) {\r\n      this.phi = degToRad(a_phi);\r\n    }\r\n    if(r) {\r\n      this.dis = r;\r\n    }\r\n    /**\r\n     * 当 POS 距离 图像超过 1 时，无法显示\r\n     */\r\n    // this.pos = [0.65, 0.65, 0.65]\r\n    this.pos = coordCarte(this.theta, this.phi, this.dis);\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n  * 设置 gl 的视口，并更新透视矩阵和视图矩阵\r\n  **/\r\n  setSize(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    states.gl.viewport(0, 0, width, height);\r\n    mat4.perspective(this.pMatrix, 45 / 180 * Math.PI, width / height, 0.5, 500.0);\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n  * 重置摄像机位置\r\n  **/\r\n  reset() {\r\n    this.rotate(this.defaultTheta, this.defaultPhi, this.dis);\r\n    this.update();\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n* @desc 场景控制器\r\n* 1. 封装了对 gl 的设置，若无必要，不用再设置 gl；异步加载着色器代码，封装了对着色器的编译连接等操作。\r\n* 包含对全局变量 attributes 和 uniforms 的设置\r\n* 2. 为了方便，实际上将 Renderer 的功能集成到了 Scene 中，需要绘制时，调用 Scene 对象的 render 方法即可。\r\n* 3. 场景只能接收一个 Camera 对象，若多次添加 Camera 对象，则会将最后一个 Camera 对象设为当前的 Camera 对象\r\n**/\r\nclass Scene {\r\n  /**\r\n   * \r\n   * @param {Object} props \r\n   */\r\n  constructor(props) {\r\n    let gl = states.gl;\r\n    // states.gl = gl;\r\n    gl.enable(gl.DEPTH_TEST); // depth test\r\n    gl.depthFunc(gl.LESS);\r\n    gl.enable(gl.CULL_FACE); // 设置遮挡剔除有效\r\n    gl.cullFace(gl.BACK);\r\n    gl.clearColor(0.97, 0.97, 0.97, 1.0); // background color\r\n    gl.clearDepth(1.0);\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\r\n    gl.enable(gl.BLEND); // enable blend for alpha\r\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n    this.type = \"Scene\";\r\n    this.objs = [];\r\n    this.light_direct = [0.35, 0.35, 0.7];\r\n  }\r\n\r\n\r\n  /**\r\n    * @params first  将物体添加到序列头部，每次绘制时优先绘制\r\n    * @desc 添加要绘制的物体。不包含摄像机\r\n  **/\r\n  add(obj, first) {\r\n    if (obj === undefined) {\r\n      console.log(\"[Warn] Undefined on Scene adding.\");\r\n      return;\r\n    }\r\n\r\n    if (first) {\r\n      this.objs.unshift(obj);\r\n    } else {\r\n      this.objs.push(obj);\r\n    }\r\n    if (this.camera !== undefined) {\r\n      // force camera to notify all added object refresh mvpMatrix\r\n      this.camera.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 添加摄像机，重复添加则会更新 camera 对象（只有一个有效）\r\n   * \r\n   * @param {*} camera \r\n   */\r\n  addCamera(camera) {\r\n    this.camera = camera;\r\n    camera.recv((matrix) => {\r\n      /**\r\n        * 通知所有物体视图矩阵有变化\r\n       **/\r\n      for (var i = 0; i < this.objs.length; i++) {\r\n        this.objs[i].onViewChanged(matrix);\r\n      }\r\n      // this.render()\r\n    });\r\n  }\r\n\r\n  /**\r\n  * 依次绘制物体\r\n  **/\r\n  render() {\r\n    this.running = true;\r\n    var scope = this;\r\n    function r() {\r\n      states.gl.clear(states.gl.COLOR_BUFFER_BIT | states.gl.DEPTH_BUFFER_BIT);   // clear color buffer and depth buffer bit\r\n      for (var i = 0; i < scope.objs.length; i++) {\r\n        if(scope.objs[i].visible) {\r\n          scope.objs[i].paint();\r\n          // states.gl.bindBuffer(states.gl.ARRAY_BUFFER, null);\r\n          // states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, null);\r\n        }\r\n      }\r\n      if(scope.running) {\r\n        requestAnimationFrame(r)\r\n      }\r\n    }\r\n    requestAnimationFrame(r)\r\n    // r()\r\n    // this.render()\r\n  }\r\n\r\n\r\n  /*\r\n  * 根据渲染类型返回渲染器\r\n  * @param  gl       gl 对象\r\n  * @param  codestr  渲染程序代码，具体渲染方式\r\n  * @param  type     渲染类型\r\n  * @return  渲染器\r\n  */\r\n  getShader(gl, codestr, type) {\r\n    // 创建渲染器\r\n    var shader = gl.createShader(type);\r\n\r\n    gl.shaderSource(shader, codestr);\r\n    // 编译渲染器\r\n    gl.compileShader(shader);\r\n\r\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n      console.log(\"JS:Shader compile failed\");\r\n      console.log(gl.getShaderInfoLog(shader));\r\n      return null;\r\n    }\r\n    //    console.log(\"compile done!\");\r\n    return shader;\r\n  }\r\n\r\n  /**\r\n  * 初始化着色器\r\n  * @desc 异步加载着色器代码并在完成加载后进行编译链接\r\n  * @param {String} vertexCode\r\n  * @param {String} fragCode\r\n  **/\r\n  initShaders(vertexCode, fragCode) {\r\n    var shaderProgram = states.gl.createProgram();\r\n    var vertexShader = this.getShader(states.gl, vertexCode, states.gl.VERTEX_SHADER);\r\n    states.gl.attachShader(shaderProgram, vertexShader);\r\n\r\n    var fragShader = this.getShader(states.gl, fragCode, states.gl.FRAGMENT_SHADER);\r\n    states.gl.attachShader(shaderProgram, fragShader);\r\n    this._onShaderReady(shaderProgram);\r\n\r\n  }\r\n\r\n  /**\r\n  * 在着色器代码准备好后进行着色器的编译链接；\r\n  * 设置全局变量 attributes 和 uniforms\r\n  **/\r\n  _onShaderReady(shaderProgram) {\r\n    states.gl.linkProgram(shaderProgram);\r\n    states.gl.useProgram(shaderProgram);\r\n\r\n    attributes.vertex_position = states.gl.getAttribLocation(shaderProgram, \"aVertexPosition\");\r\n    states.gl.enableVertexAttribArray(attributes.vertex_position);\r\n\r\n    attributes.vertex_normal = states.gl.getAttribLocation(shaderProgram, \"aVertexNormal\");\r\n    states.gl.enableVertexAttribArray(attributes.vertex_normal)\r\n\r\n    attributes.color = states.gl.getAttribLocation(shaderProgram, \"aColor\");\r\n    states.gl.enableVertexAttribArray(attributes.color);\r\n\r\n    attributes.texture = states.gl.getAttribLocation(shaderProgram, \"aTexture\");\r\n    attributes.color = states.gl.getAttribLocation(shaderProgram, \"aColor\");\r\n\r\n    uniforms.pmv_matrix = states.gl.getUniformLocation(shaderProgram, \"uPMVMatrix\"); // 透视模型视图矩阵\r\n    uniforms.m_matrix = states.gl.getUniformLocation(shaderProgram, \"uMMatrix\")\r\n    uniforms.n_matrix = states.gl.getUniformLocation(shaderProgram, \"uNMatrix\"); // 法线\r\n    uniforms.alpha = states.gl.getUniformLocation(shaderProgram, \"uAlpha\");\r\n    uniforms.frag_color = states.gl.getUniformLocation(shaderProgram, \"uFragColor\");\r\n    uniforms.has_texture = states.gl.getUniformLocation(shaderProgram, \"uHasTexture\");\r\n    uniforms.light_direction = states.gl.getUniformLocation(shaderProgram, \"uLightDirection\"); // 光照\r\n    uniforms.specColor = states.gl.getUniformLocation(shaderProgram, \"uSpecColor\");\r\n    uniforms.vertexColor = states.gl.getUniformLocation(shaderProgram, \"uVertColor\");\r\n\r\n    states.gl.uniformMatrix4fv(uniforms.n_matrix, false, mat4.create());\r\n    states.gl.uniform3fv(uniforms.light_direction, this.light_direct);  // where light origins\r\n  }\r\n}\r\n\r\nexport {Camera, Scene}","import {PaintObj, cylinderShape, genVertices, \r\n  coordCarte, degToRad, circleShape, rotateVertex} from './PaintObj'\r\nimport {states, attributes, uniforms, attitude} from './Variables'\r\n\r\n/**\r\n* SensorPoint Object\r\n* 在三维空间中绘制斑点，用于模拟传感器的指向。\r\n* 当指向变化时会通知注册的回调函数，以便其它对象可以得到最新的传感器位置\r\n* 尚未实现的功能：\r\n* - 从原点指向 Point 的圆锥体\r\n**/\r\nclass SensorPoint extends PaintObj {\r\n  constructor(props) {\r\n    // PaintObj.call(this, props);\r\n    super(props);\r\n    this.type = \"SensorPoint\";\r\n    // the reason why rotation and then translation is out of expections\r\n    // but if rMatrix is introduced, the result seems good\r\n    // now all vertices are calculated by function, no need for rMatrix\r\n    // this.rMatrix  = mat4.create();\r\n    this.inv_color = props.inv_color || [0.0, 1.0, 0.0];\r\n    this.dis = 4;\r\n    attitude.pitch = 0;\r\n    attitude.heading = 0;\r\n    this.headingOffset = 0;\r\n    attitude.roll = 0;\r\n    this.callbacks = [];\r\n  }\r\n  \r\n  init() {\r\n    var cylinder = cylinderShape(this.size, this.sides, 0.01);\r\n\r\n    var vertex = cylinder.vertex;\r\n    var index = cylinder.index;\r\n\r\n    var i = 0;\r\n    var color = [];\r\n    for (i = 0; i <= this.sides; i++) {\r\n      color = color.concat(this.inv_color);\r\n    }\r\n    for (i = 0; i <= this.sides; i++) {\r\n      color = color.concat(this.color);\r\n    }\r\n\r\n    var vertices = genVertices(vertex, color, [0, 1, 1]);\r\n    this.index_count = index.length;\r\n\r\n    this.vertexBuffer = this.createArrayBuffer(new Float32Array(vertices), states.gl.STATIC_DRAW);\r\n    this.indexBuffer  = this.createArrayBuffer(new Uint16Array(index), states.gl.STATIC_DRAW);\r\n  }\r\n\r\n  paint() {\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 9 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 9 * 4, 3 * 4);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 9 * 4, 6 * 4);\r\n\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);          //  set alpha value\r\n\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n\r\n    states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n    states.gl.drawElements(states.gl.TRIANGLES, this.index_count, states.gl.UNSIGNED_SHORT, 0);\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setScale(size) {\r\n    this.size = size;\r\n    vec3.set(this.vscale, size, size, size);\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} r  中心点与原点的距离\r\n   * @param {*} a_theta  角度制（与Z轴正半轴的夹角）\r\n   * @param {*} a_phi    角度制（与X轴正半轴的夹角）\r\n   */\r\n  setTranslation(r, a_theta, a_phi) {\r\n    this.translation = coordCarte(degToRad(a_theta), degToRad(a_phi), r);\r\n    quat.fromEuler(this.quat, 0, a_theta, a_phi);\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * 根据给定的参数更新俯仰角，航向角，中心点与原点的距离等\r\n   * @param {*} params  \r\n   * dis  中心点与原点的距离\r\n   * pitch 俯仰角（与X轴平面的夹角，在 Z 轴正向一侧为正）\r\n   * heading 航向角（在 XOY 平面上的投影与X轴正半轴的夹角）\r\n   * roll 横滚角。对于 SensorPoint 对象来说没有作用\r\n   */\r\n  setParam(params) {\r\n\r\n    this.dis = params.dis || this.dis;\r\n    if(params.pitch) {\r\n      attitude.pitch = params.pitch;\r\n    }\r\n    if(params.heading) {\r\n      attitude.heading = params.heading;\r\n      params.heading = params.heading - this.headingOffset;\r\n    }\r\n    if(params.roll) {\r\n      attitude.roll = params.roll;\r\n    }\r\n    var theta = 90 - attitude.pitch;\r\n    this.setTranslation(this.dis, theta, attitude.heading);\r\n  }\r\n\r\n  /**\r\n    * 更新自身的模型视图矩阵并通知已注册的回调函数\r\n  **/\r\n  update() {\r\n    mat4.fromRotationTranslationScale(this.mMatrix,\r\n      this.quat,\r\n      this.translation,\r\n      this.vscale);\r\n    this.onViewChanged();\r\n\r\n    var spherical = this.spherical();\r\n    for (var i = 0; i < this.callbacks.length; i++) {\r\n      this.callbacks[i].onSphericalChanged({\r\n        dis: this.dis, pitch: attitude.pitch, heading: attitude.heading,\r\n        roll: attitude.roll, theta: spherical[0], phi: spherical[1],\r\n        size: this.size\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n    * 注册回调函数\r\n  **/\r\n  addSphericalChange(cb) {\r\n    this.callbacks.push(cb);\r\n  }\r\n\r\n  /**\r\n  * @param {Number} pitch   range [-90, 90]\r\n  * @param {Number} heading range [0, 360]\r\n  * @returns {Vec3} the angle returned is in unit of rad  vec[0] and vec[1] is in unit of RAD\r\n  *  当前指向的球坐标系坐标\r\n  */\r\n  spherical() {\r\n    var u = (90 - attitude.pitch) / 180 * Math.PI;\r\n    var v = attitude.heading / 180 * Math.PI;\r\n    return vec3.fromValues(u, v, this.dis);\r\n  }\r\n\r\n  // 重置指向\r\n  reset() {\r\n    this.headingOffset += attitude.heading;\r\n    //        console.log( attitude.heading, this.headingOffset );\r\n    this.setParam({ pitch: attitude.pitch, heading: attitude.heading, roll: attitude.roll, dis: this.dis });\r\n  }\r\n}\r\n// end of SensorPoint prototype\r\n\r\n/**\r\n* SensorPath Object\r\n* 1. 绘制传感器的路径，由于绘制路径采用的是记录传感器位置周围点的方法。因此很可能在运行过程中出现缓冲区被用完的情况，\r\n* 会自动申请新的缓冲区，记录的点越多，需要的缓冲区越多。\r\n* 2. 每申请一次约占用 90k 的内存（或显存）。另外 js 数组中保存的数据也会占用内存，所以根据已写入缓冲区的数据量进行\r\n* 偏移，对之后的缓冲区进行写操作，不在 js 数组中保留所有的点。\r\n* 3. 18.03.03 将路径绘制成虚线的绘制方法存在问题。因此路径每隔 gap 段绘制一次并没有实现，调整 gap 不会\r\n* 影响路径的绘制。（即路径以实线形式绘制）\r\n**/\r\nconst PathBytes = 4\r\nconst IndexBytes = 2\r\nconst PathSegment = 6;\r\nclass SensorPath extends PaintObj{\r\n  MaxPathIndexNum = 4800 * PathSegment * 2  // 2 PathSegment 是最小的单位\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"SensorPath\";\r\n    this.all_index_count = 0;\r\n    this.cur_path_count = 0;\r\n    this.cur_index_count = 0;\r\n    this.cur_pi = 0; // path index\r\n    this.buffer_path_bytes = this.MaxPathIndexNum * PathBytes; // 4 means the bytes float occupies, 3 means a point contains 3 coordinate\r\n    this.buffer_index_bytes = this.MaxPathIndexNum * IndexBytes; // 2 means the bytes uint  occupies\r\n    this.gap = 1; // must equal or greater then 1\r\n    this.pg = 1; // path gap count\r\n    this.init();\r\n  }\r\n\r\n  \r\n  init() {\r\n    this.angle = this.last_point;\r\n    this.path = [];\r\n    this.index = [];\r\n\r\n    // path buffer initialization\r\n    this.vertexBuffer = [];\r\n    this.indexBuffer = [];\r\n\r\n    this.createBuffer();\r\n  }\r\n\r\n  paint() {\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);     // set alpha value\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n\r\n    // 分批绘制路径\r\n    for (var i = 0; i < this.cur_pi; i++) {\r\n      states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer[i]);\r\n      states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n      states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n      states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 6 * 4, 3 * 4);\r\n      states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer[i]);\r\n      states.gl.drawElements(states.gl.TRIANGLES, this.MaxPathIndexNum, states.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    if (this.cur_index_count > 0) {\r\n      // console.log( this.cur_index_count );\r\n      states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer[this.cur_pi]);\r\n      states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n      states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n      states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 6 * 4, 3 * 4);\r\n      states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer[this.cur_pi]);\r\n      states.gl.drawElements(states.gl.TRIANGLES, this.cur_index_count, states.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setGap(gap) {\r\n    this.gap = gap;\r\n  }\r\n\r\n  setSize(size) {\r\n    this.size = size;\r\n  }\r\n\r\n  /**\r\n   * 用于绘制路径所需的顶点和索引, 每次返回 4 个顶点\r\n   * @param {Array} p     p[0] = theta    p[1] = beta    p[2] = radius\r\n   * @param {Array} lp   lp[0] = theta   lp[1] = beta   lp[2] = lradius\r\n   * @return {Object}\r\n   */\r\n  getLinearPoint(p, lp) {\r\n    var s1 = coordCarte(p[0], p[1], p[2]);\r\n    var s2 = coordCarte(lp[0], lp[1], lp[2]);\r\n    var s = [s1[0] - s2[0], s1[1] - s2[1], s1[2] - s2[2]];\r\n    //    console.log(\"s1: \"+ s1 + \"  s2: \"+s2 + \"  s: \" + s +\"\\n\");\r\n    var n0 = coordCarte((p[0] + lp[0]) * 0.5, (p[1] + lp[1]) * 0.5, p[2]);\r\n    var l = vec3.create();\r\n    vec3.cross(l, s, n0);\r\n    vec3.normalize(l, l);\r\n    vec3.scale(l, l, this.size * 0.02);\r\n    //    console.log(\"vec l: \" + vec3.str(l));\r\n\r\n    var vertex;\r\n    var vertices = [];\r\n    var color = this.color;\r\n\r\n    var pushVertex = function () {\r\n      vertices = vertices.concat(vertex);\r\n      vertices = vertices.concat(color);\r\n    }\r\n    // console.log(\"Linear Point: \", s1, l)\r\n    vertex = [s1[0] - l[0], s1[1] - l[1], s1[2] - l[2]];   // 0\r\n    pushVertex();\r\n    vertex = [s1[0] + l[0], s1[1] + l[1], s1[2] + l[2]];   // 1\r\n    pushVertex();\r\n    vertex = [s2[0] - l[0], s2[1] - l[1], s2[2] - l[2]];   // 2\r\n    pushVertex();\r\n    vertex = [s2[0] + l[0], s2[1] + l[1], s2[2] + l[2]];   // 3\r\n    pushVertex();\r\n    // until now, vertices length should be 24\r\n\r\n    var index = [];\r\n    var n = this.cur_path_count / PathSegment;  // it is better than index.length\r\n    index.push(n + 0, n + 2, n + 3, n + 0, n + 3, n + 1);\r\n    index.push(n + 0, n + 3, n + 2, n + 0, n + 1, n + 3);\r\n\r\n    return {\r\n//            \"point\" : linearPoint,\r\n//            \"color\" : color,\r\n      \"vertices\": new Float32Array(vertices),\r\n      \"index\": new Uint16Array(index),\r\n    }\r\n  }\r\n\r\n  onSphericalChanged(params) {\r\n    if (this.last_point === undefined) {\r\n      this.last_point = params;\r\n      //            return;\r\n    }\r\n\r\n    var lpos = coordCarte(this.last_point.theta, this.last_point.phi, this.last_point.dis);\r\n    var pos = coordCarte(params.theta, params.phi, params.dis);\r\n    var dist = vec3.dist(lpos, pos);\r\n    var angle = [params.theta, params.phi, params.dis];\r\n\r\n    if (dist > Math.PI * params.dis * 0.002) {\r\n      // console.log(\"test\", angle)\r\n      this._updateBuffer(angle);\r\n      this.angle = angle;\r\n      this.last_point = params;\r\n    }\r\n\r\n    // angle[2] is vector length\r\n//        if( dist > Math.PI * params.dis * 0.03 ) {\r\n//            this._updateBuffer( angle );\r\n//            this.angle      = angle;\r\n//            this.last_point = params;\r\n//        } else if( dist > Math.PI * params.dis * 0.001 ) {\r\n//            this.pg ++;\r\n//            this.last_point = params;\r\n\r\n//            if( this.pg === this.gap ) {\r\n//                this.angle = angle;\r\n//            }\r\n//            if( this.pg === this.gap+1 ) {\r\n//                this.pg = 1;\r\n//                this._updateBuffer( angle );\r\n//                this.angle = angle;\r\n//            }\r\n//        }\r\n  }\r\n\r\n    /**\r\n    * @param nangle next sphericalCoord\r\n    * @param langle last sphericalCoord\r\n    */\r\n   _updateBuffer(nangle) {\r\n    var langle = [this.last_point.theta, this.last_point.phi, this.last_point.dis];\r\n    var presult = this.getLinearPoint(nangle, langle);\r\n    this.all_index_count += presult.index.length;\r\n    // when path index count is greater or equal to this.MaxPathIndexNum, then a new buffer should be realloced\r\n    // and the counter should be reset\r\n    \r\n    // console.log(\"before vertex\", this.cur_index_count)\r\n    this.subBuffer(this.vertexBuffer[this.cur_pi], this.cur_path_count  * PathBytes, presult.vertices);\r\n    // console.log(\"vertex\", this.cur_path_count, this.cur_path_count  * PathBytes , this.cur_path_count  * PathBytes + presult.vertices.length)\r\n    this.subBuffer( this.indexBuffer[this.cur_pi], this.cur_index_count * IndexBytes, presult.index);\r\n    // console.log(\"index\", this.cur_index_count, this.cur_index_count * IndexBytes, this.cur_index_count * IndexBytes + presult.index.length)\r\n\r\n    // Note! because the updateSubBuffer() should use the offset as the parameter,\r\n    // the addition of path or index count should be later, or the buffer will be out of its size\r\n    this.cur_path_count  += presult.vertices.length;\r\n    this.cur_index_count += presult.index.length;\r\n    if (this.cur_path_count >= this.MaxPathIndexNum) {\r\n      this.cur_pi++;\r\n      console.info(\"Info: [Path] create a new buffer!\\n\");\r\n      this.createBuffer();\r\n      this.resetCurrentPath();\r\n    }\r\n  }\r\n\r\n  // 重置路径变量\r\n  resetCurrentPath(vec) {\r\n    this.cur_path_count = 0;\r\n    this.cur_index_count = 0;\r\n    this.pg = 0;\r\n  }\r\n\r\n  resetAllPath(args) {\r\n    // 删掉无用的buffer，节省内存\r\n    for (var i = 1; i <= this.cur_pi; i++) {\r\n      states.gl.deleteBuffer(this.vertexBuffer[i]);\r\n      states.gl.deleteBuffer(this.indexBuffer[i]);\r\n    }\r\n    this.all_index_count = 0;\r\n    this.cur_pi = 0;\r\n    this.last_point = undefined\r\n    this.resetCurrentPath();\r\n  }\r\n\r\n  createBuffer() {\r\n    this.vertexBuffer[this.cur_pi] = this.createArrayBuffer(this.buffer_path_bytes, states.gl.STATIC_DRAW, states.gl.ARRAY_BUFFER);\r\n    this.indexBuffer[this.cur_pi] = this.createArrayBuffer(this.buffer_index_bytes, states.gl.STATIC_DRAW, states.gl.ELEMENT_ARRAY_BUFFER);\r\n  }\r\n}\r\n// end of SensorPath prototype\r\n\r\n\r\n/**\r\n* 打点操作\r\n* 初始化时为顶点申请一定大小的缓冲区，打点的数量有限制，\r\n* 因为在程序运行时不会自动申请缓冲区。\r\n**/\r\nclass RecordPoint extends PaintObj{\r\n  constructor(props) {\r\n    super(props)\r\n    this.type = \"RecordPoint\";\r\n    this.max_vertex = this.sides * 1000;\r\n    this.vertex_count = 0;\r\n    this.index_count = 0;\r\n    this.init();\r\n  }\r\n  \r\n  init () {\r\n    this.vertexBuffer = this.createArrayBuffer(this.max_vertex * 4, states.gl.DYNAMIC_DRAW, states.gl.ARRAY_BUFFER);\r\n    this.indexBuffer = this.createArrayBuffer(this.max_vertex * 2, states.gl.DYNAMIC_DRAW, states.gl.ELEMENT_ARRAY_BUFFER);\r\n  }\r\n\r\n  paint () {\r\n    // 进行采点操作\r\n    if (this.vertex_count === 0) {\r\n      return;\r\n    }\r\n\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 6 * 4, 3 * 4);\r\n    states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n    states.gl.drawElements(states.gl.TRIANGLES, this.index_count, states.gl.UNSIGNED_SHORT, 0);\r\n  }\r\n\r\n  onViewChanged (matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setSize (size) {\r\n    this.size = size;\r\n    vec3.fromValues(this.vscale, size, size, size);\r\n    mat4.fromRotationTranslationScale(this.mMatrix, this.quat, this.translation, this.vscale);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  record () {\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n\r\n    console.log(\"[Info]: record a point.\");\r\n\r\n    var i = 0, j = 0;\r\n    var point = [];\r\n    var index = [];\r\n\r\n    point = circleShape(this.size, this.sides, 0, Math.PI * 2);\r\n    rotateVertex(point, this.theta, this.phi, this.dis);\r\n\r\n    var vertices = genVertices(point, [0.0, 0.5, 0.5]);\r\n\r\n    var n = this.vertex_count / 6;\r\n    for (i = 1; i < this.sides; i++) {\r\n      index.push(n, n + i, n + i + 1,\r\n        n, n + i + 1, n + i\r\n      );\r\n    }\r\n    index.push(n, n + this.sides, n + 1,\r\n      n, n + 1, n + this.sides\r\n    );\r\n    this.subBuffer(this.vertexBuffer, this.vertex_count * 4, new Float32Array(vertices));\r\n    this.subBuffer( this.indexBuffer, this.index_count * 2, new Uint16Array(index));\r\n\r\n    this.vertex_count += vertices.length;\r\n    this.index_count += index.length;\r\n  }\r\n\r\n  onSphericalChanged (params) {\r\n    this.theta = params.theta;\r\n    this.phi = params.phi;\r\n    this.dis = params.dis * 1.01;\r\n    this.size = params.size * 0.95;\r\n  }\r\n\r\n  // 重置已经打的点\r\n  reset () {\r\n    this.vertex_count = 0;\r\n    this.index_count = 0;\r\n  }\r\n}\r\n// end of RecordPoint prototype\r\n\r\nexport {SensorPoint, SensorPath, RecordPoint};","import {PaintObj, degToRad} from './PaintObj'\r\nimport {states, attributes, uniforms} from './Variables'\r\n\r\n// import CraftObj from '!'\r\n/**\r\n* 飞行器模拟器，模型是从 https://archive3d.net/ 中下载的，\r\n* 模型转换成 OBJ 格式，并利用 [webgl-obj-loader](https://github.com/frenchtoast747/webgl-obj-loader)\r\n* 进行加载\r\n**/\r\nclass Craft extends PaintObj{\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"Craft\";\r\n    var scale = props.size || 1;\r\n    this.setScale(scale);\r\n    this.visible = false;\r\n    this.heading = 0;\r\n    this.pitch = 0;\r\n    this.roll = 0;\r\n    this.headingOffset = 0;\r\n    this.pitchOffset = 0;\r\n    this.rollOffset = 0;\r\n    // this.init();\r\n    if(props.obj) {\r\n      this.init(props.obj)\r\n    }\r\n  }\r\n\r\n  init(objPromise) {\r\n    objPromise.then( (obj) => {\r\n      // console.log(\"test\", txt.default)\r\n      // console.log(obj, typeof(obj))\r\n      this.mesh = new OBJ.Mesh(obj.default)\r\n      OBJ.initMeshBuffers(states.gl, this.mesh)\r\n      this.visible = true;\r\n    })\r\n  }\r\n\r\n  paint() {\r\n\r\n    if (this.mesh === undefined) {\r\n      return;\r\n    }\r\n\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);\r\n    states.gl.uniform3fv( uniforms.frag_color, [0.8, 0.3, 0.6] );\r\n    //  states.gl.uniform1i(  uniforms.has_texture, true );\r\n    states.gl.uniform1i(uniforms.specColor, 1);\r\n    states.gl.uniform3fv(uniforms.vertexColor, this.color);\r\n\r\n    // states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    // console.log(this.mesh.vertexBuffer)\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.mesh.vertexBuffer);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, \r\n      this.mesh.vertexBuffer.itemSize, states.gl.FLOAT, false, 0, 0);\r\n    states.gl.vertexAttribPointer(attributes.color,   \r\n      3, states.gl.FLOAT, false, 0, 0);\r\n    \r\n    if(!this.mesh.textures.length){\r\n        states.gl.disableVertexAttribArray(attributes.textureCoordAttribute);\r\n    }\r\n    else{\r\n        // if the texture vertexAttribArray has been previously\r\n        // disabled, then it needs to be re-enabled\r\n        states.gl.enableVertexAttribArray( attributes.texture );\r\n        states.gl.bindBuffer( states.gl.ARRAY_BUFFER, this.mesh.textureBuffer );\r\n        states.gl.vertexAttribPointer( attributes.texture, this.mesh.textureBuffer.itemSize, states.gl.FLOAT, false, 0, 0);\r\n    }\r\n\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.mesh.normalBuffer);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, this.mesh.normalBuffer.itemSize, \r\n      states.gl.FLOAT, false, 0, 0);\r\n\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n\r\n    states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.mesh.indexBuffer);\r\n    states.gl.drawElements(states.gl.TRIANGLES, this.mesh.indexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n    \r\n    // var binding1 = states.gl.getParameter(states.gl.ARRAY_BUFFER_BINDING);\r\n    // var binding2 = states.gl.getParameter(states.gl.ELEMENT_ARRAY_BUFFER_BINDING);\r\n    // console.log(\"this: \", this.mesh.vertexBuffer, this.mesh.indexBuffer)\r\n    // console.log(\"binding: \", binding1, binding2)\r\n    // states.gl.drawElements(states.gl.TRIANGLES, this.elements, states.gl.UNSIGNED_SHORT, 0);\r\n    \r\n//        states.gl.uniform1i( uniforms.has_texture, false );\r\n    states.gl.uniform1i(uniforms.specColor, false);\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  /**\r\n    * 加载模型不进行旋转操作时，可以看到模型指向 Z 轴负半轴，模型顶部指向 Y 轴\r\n    * 正半轴，因此需要在跟随 SensorPoint 做旋转操作时需要首先调整指向。\r\n    * mat4.rotate 方法会将物体的坐标轴进行旋转，即旋转后物体坐标轴与世界坐标系的轴不同\r\n  **/\r\n  setRotation(params) {\r\n    this.pitch = params.pitch || this.pitch;\r\n    this.heading = params.heading || this.heading;\r\n    this.roll = params.roll || this.roll;\r\n    //        quat4.fromEuler( this.quat, params.heading, params.pitch, params.roll );\r\n    mat4.fromScaling(this.mMatrix, this.vscale);    \r\n    // if craft's look at [1, 0, 0] and its up is [0, 0, 1]\r\n    // following rotation will be fine, now it needs to some calibrations\r\n    // what's more, the coordinate will rotate with the angle\r\n    //        mat4.rotateZ( this.mMatrix, this.mMatrix, degToRad( params.heading ) );\r\n    //        mat4.rotateY( this.mMatrix, this.mMatrix, degToRad( params.pitch ) );\r\n    //        mat4.rotateX( this.mMatrix, this.mMatrix, degToRad( params.roll ) );\r\n\r\n    mat4.rotateX(this.mMatrix, this.mMatrix, degToRad(this.pitchOffset));\r\n    //        mat4.rotateY( this.mMatrix, this.mMatrix, degToRad( 270 ) );\r\n    mat4.rotateY(this.mMatrix, this.mMatrix, degToRad(this.heading + this.headingOffset));\r\n    mat4.rotateX(this.mMatrix, this.mMatrix, degToRad(this.pitch));\r\n    mat4.rotateZ(this.mMatrix, this.mMatrix, degToRad(this.roll));\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setScale(size) {\r\n    this.size = size;\r\n    vec3.set(this.vscale, size, size, size);\r\n    this.setRotation({});\r\n    // sensorPoint.update();\r\n  }\r\n}\r\nCraft.prototype.onSphericalChanged = Craft.prototype.setRotation\r\n\r\nexport {Craft};","/**\r\n * Author: BriFuture\r\n * Date: 2019/04/05\r\n * Desc: 球体和球面上的参考圆圈\r\n */\r\n\r\nimport {PaintObj, degToRad, coordCarte, circleShape, genVertices} from './PaintObj'\r\nimport {states, uniforms, attributes} from './Variables'\r\n/**\r\n* Sphere Object\r\n* 绘制参考球。绘制模式有 1. 球面 2. 线条 3.少数线条 等模式\r\n**/\r\nclass Sphere extends PaintObj{\r\n  MODE_SURFACE = 0;\r\n  MODE_LINE = 1;\r\n  MODE_LESSLINE = 2;\r\n\r\n  DEFAULT_RADIUS = 4;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"Sphere\";\r\n    this.vn = props.vn || 48;\r\n    this.hn = (props.hn || 48) * 0.5;\r\n    this.size = props.size || this.DEFAULT_RADIUS; // default radius\r\n    this.drawMode = this.MODE_SURFACE;\r\n    this.line_alpha = 0.65;\r\n    this.alpha = props.alpha || 0.25;\r\n    this.setSize();\r\n    // this.visible = false;\r\n  }\r\n\r\n  init() {\r\n    var res = this.getVertex();\r\n    var index = this.getIndex();\r\n\r\n    // vertex info，static_draw is enough for both vertex and index now\r\n    this.vertexBuffer    = this.createArrayBuffer(new Float32Array(res.vertices),     states.gl.STATIC_DRAW);\r\n    this.indexBuffer     = this.createArrayBuffer(new Uint16Array(index.vertex_index), states.gl.STATIC_DRAW);\r\n    this.lineIndexBuffer = this.createArrayBuffer(new Uint16Array(index.line_index), states.gl.STATIC_DRAW);\r\n    this.lessLineIndexBuffer = this.createArrayBuffer(new Uint16Array(index.less_line_index), states.gl.STATIC_DRAW);\r\n    this.lessLSIndexBuffer = this.createArrayBuffer(new Uint16Array(index.less_ls_index), states.gl.STATIC_DRAW);\r\n  }\r\n\r\n\r\n  paint() {\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal,   3, states.gl.FLOAT, false, 6 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.color,           3, states.gl.FLOAT, false, 6 * 4, 3 * 4);\r\n\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n    switch (this.drawMode) {\r\n      case this.MODE_LINE:\r\n        states.gl.uniform1f(uniforms.alpha, this.line_alpha);          //  set alpha value\r\n        states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.lineIndexBuffer);\r\n        states.gl.drawElements(states.gl.LINES, this.lineIndexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n        break;\r\n      case this.MODE_LESSLINE:\r\n        states.gl.uniform1f(uniforms.alpha, this.line_alpha);          //  set alpha value\r\n        states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.lessLineIndexBuffer);\r\n        states.gl.drawElements(states.gl.LINES, this.lessLineIndexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n        // the surface on which equator lies\r\n        states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.lessLSIndexBuffer);\r\n        states.gl.drawElements(states.gl.TRIANGLES, this.lessLSIndexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n        break;\r\n      case this.MODE_SURFACE:\r\n      default:\r\n        states.gl.uniform1f(uniforms.alpha, this.alpha);\r\n        states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n        states.gl.drawElements(states.gl.TRIANGLES, this.indexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n        break;\r\n    }\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setSize(size) {\r\n    if(size)\r\n      this.size = size;\r\n    else\r\n      this.size = this.DEFAULT_RADIUS;\r\n\r\n    vec3.set(this.vscale, this.size, this.size, this.size);\r\n    mat4.fromScaling(this.mMatrix, this.vscale);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setDrawMode(mode) {\r\n    this.drawMode = mode;\r\n  }\r\n\r\n  setAlpha(alpha) {\r\n    this.alpha = alpha;\r\n  }\r\n\r\n  /**\r\n   * 计算得到球面的所有顶点的位置\r\n   * 先绘制经线，后绘制纬线\r\n   * @returns 返回所有类型的顶点个数\r\n   */\r\n  getVertex() {\r\n    var vertices = [];\r\n    var vertex = [];\r\n    //    var vn = [];        // 顶点法向量数组，当球心在原点时，与顶点坐标相同\r\n    var i, j, k;\r\n\r\n    // i indicates vertical line while j indicates horizontal line,\r\n    // vertical line is half a circle, so the number should be 1 more\r\n    for (j = 0; j <= this.vn; j++) {\r\n      for (i = 0; i <= this.hn; i++) {\r\n        // (n+1)*n points are needed\r\n        k = coordCarte(degToRad(i * 180 / this.hn), degToRad(j * 360 / this.vn), 1);\r\n        vertex = vertex.concat(k[0], k[1], k[2]);\r\n      }\r\n    }\r\n    // add origin point into array\r\n    vertex = vertex.concat([0, 0, 0]);\r\n    vertices = genVertices(vertex, this.color);\r\n\r\n    return {\r\n      \"vertices\": vertices\r\n    }\r\n  }\r\n\r\n  // 获取绘制球面时需要的顶点索引\r\n  getIndex() {\r\n    var vertexIndex = []; // surfaceDrawMode  绘制时所用的索引\r\n    var lineIndex = []; // lineDrawMode     绘制时所用的索引\r\n    var lessLineIndex = []; // lessLineDrawMode 绘制时所用的索引\r\n    var lessLSIndex = [];\r\n    var i = 0, j = 0;\r\n\r\n    for (j = 0; j < this.vn; j++) {  // the last half circle (j = 0) overlaps the first one (j = 0)\r\n      for (i = 0; i < this.hn + 1; i++) {\r\n        // for line mode index\r\n        lineIndex.push(\r\n          i + j * (this.hn + 1),\r\n          i + 1 + j * (this.hn + 1),\r\n          i + j * (this.hn + 1),\r\n          i + (j + 1) * (this.hn + 1)\r\n        );\r\n\r\n        // for surface mode index\r\n        vertexIndex.push(\r\n          i + j * (this.hn + 1),        // 0\r\n          i + 1 + j * (this.hn + 1),      // 1\r\n          i + 1 + (j + 1) * (this.hn + 1)   // n+1\r\n        );\r\n        vertexIndex.push(\r\n          i + j * (this.hn + 1),            // 0\r\n          i + 1 + (j + 1) * (this.hn + 1),      // n+1\r\n          i + (j + 1) * (this.hn + 1)         // n\r\n        );\r\n      }\r\n    }\r\n    for (i = 0; i < this.hn + 1; i++) {\r\n      // 绘出 4 条经线\r\n      j = 0;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + 1 + j * (this.hn + 1));\r\n      j = 0.25 * this.vn;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + 1 + j * (this.hn + 1));\r\n      j = 0.5 * this.vn;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + 1 + j * (this.hn + 1));\r\n      j = 0.75 * this.vn;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + 1 + j * (this.hn + 1));\r\n    }\r\n    for (j = 0; j < this.vn; j++) {\r\n      i = this.hn / 2;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + (j + 1) * (this.hn + 1)); // equator line\r\n    }\r\n    // 赤道所在平面\r\n    for (j = this.vn * 0.5; j < this.vn * 0.75; j++) {\r\n      // 原点 -- 赤道上的点 -- 赤道上的点\r\n      lessLSIndex.push((this.vn + 1) * (this.hn + 1));   // origin point\r\n      lessLSIndex.push(this.hn * 0.5 + j * (this.hn + 1));\r\n      lessLSIndex.push(this.hn * 0.5 + (j + 1) * (this.hn + 1));\r\n      lessLSIndex.push((this.vn + 1) * (this.hn + 1));   // origin point\r\n      lessLSIndex.push(this.hn * 0.5 + (j + 1) * (this.hn + 1));\r\n      lessLSIndex.push(this.hn * 0.5 + j * (this.hn + 1));\r\n    }\r\n\r\n    //        this.vertex_index = vertexIndex;\r\n    //        this.line_index   = lineIndex;\r\n    //        this.less_line_index = lessLineIndex;\r\n    //        this.less_ls_index   = lessLSIndex;\r\n    return {\r\n      vertex_index: vertexIndex,\r\n      line_index: lineIndex,\r\n      less_line_index: lessLineIndex,\r\n      less_ls_index: lessLSIndex\r\n    }\r\n  }\r\n}\r\n\r\n// end of Sphere prototype\r\n\r\n\r\n/**\r\n* ReferenceCircle Object (球面上的参考圆圈)\r\n* 通过该对象管理分离的 26 个不同的 circle。但为了节省内存占用和\r\n* 减少绑定的缓冲区的次数，实际上只存储了一个 Circle 的 buffer，\r\n* 利用模型变换矩阵绘制出 26 个圆圈。\r\n**/\r\nconst DeltaRad = 0.03 * Math.PI;\r\n\r\nclass RefCircle extends PaintObj{\r\n  constructor(props) {\r\n    props = props || {};\r\n    super(props);\r\n    this.dis = props.dis || 4;\r\n    this.visible = false;\r\n    this.current = -1;\r\n    \r\n    var red = [1.0, 0.0, 0.0];\r\n    var green = [0.0, 1.0, 0.0];\r\n    var blue = [0.0, 0.0, 1.0];\r\n    var i = 0, j = 0, k = 0;\r\n    var circles = [];\r\n    circles[k] = new SingleReferCircle({ \"pos\": [0, 0, this.dis], color: green, gl: states.gl });\r\n    k++;\r\n    for (i = 0; i <= 2; i++) {\r\n      for (j = 0; j < 8; j++) {\r\n        if (i === 1 && j % 2 === 0) {\r\n          circles[k] = new SingleReferCircle({ \"pos\": [(i + 1) * 45, j * 45, this.dis], color: green, gl: states.gl });\r\n        }\r\n        else {\r\n          circles[k] = new SingleReferCircle({ \"pos\": [(i + 1) * 45, j * 45, this.dis], color: blue, gl: states.gl });\r\n        }\r\n        k++;\r\n      }\r\n    }\r\n    circles[k] = new SingleReferCircle({ \"pos\": [4 * 45, 0, this.dis], color: green, gl: states.gl });\r\n    this.circles = circles;\r\n    this.setScale(props.size || 1);\r\n    this.init();\r\n  }\r\n\r\n  \r\n  init() {\r\n    var initSize = 1;\r\n    var vertex = circleShape(initSize, this.sides, 0, Math.PI * 2);\r\n    var vertices = genVertices(vertex, this.color, vertex);\r\n\r\n    var i = 0;\r\n    var index = [];\r\n    for (i = 1; i < this.sides + 1; i++) {\r\n      index.push(i);\r\n    }\r\n    this.vertexBuffer = this.createArrayBuffer(new Float32Array(vertices), states.gl.STATIC_DRAW);\r\n    this.indexBuffer = this.createArrayBuffer(new Uint16Array(index), states.gl.STATIC_DRAW);\r\n  }\r\n\r\n  paint() {\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);\r\n    states.gl.uniform1i(uniforms.specColor, 1);\r\n\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 9 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 9 * 4, 3 * 4);\r\n    states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 9 * 4, 6 * 4);\r\n\r\n    states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n\r\n    for (var i = 0; i < 26; i++) {\r\n      //            this.circles[i].paint();\r\n      //        states.gl.uniformMatrix4fv( uniforms.m_matrix, false, this.mMatrix );\r\n      states.gl.uniform3fv(uniforms.vertexColor, this.circles[i].color);\r\n      states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.circles[i].mvpMatrix);\r\n      states.gl.drawElements(this.circles[i].drawMode, this.sides, states.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    states.gl.uniform1i(uniforms.specColor, 0);\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    for (var i = 0; i < 26; i++) {\r\n      this.circles[i].onViewChanged(matrix);\r\n    }\r\n  }\r\n\r\n  setDis(dis) {\r\n    this.dis = dis;\r\n    for (var i = 0; i < 26; i++) {\r\n      this.circles[i].setTranslation(this.dis + 0.1);\r\n    }\r\n  }\r\n\r\n  setScale(size) {\r\n    //        this.size = size;\r\n    for (var i = 0; i < 26; i++) {\r\n      this.circles[i].setScale(size);\r\n    }\r\n  }\r\n\r\n  // 判断 Sensor point 是否接近该圆圈。（目前只考虑 theta 和 phi 角而不是计算两个圆心的距离）\r\n  onSphericalChanged(params) {\r\n    if(!this.visible) {\r\n      return;\r\n    }\r\n    let c;\r\n    c = this.circles[0];\r\n    if(Math.abs(params.theta - c.theta) < DeltaRad) {\r\n      c.setCurrent(params.size)\r\n      this.current = 0;\r\n      return;\r\n    } else if(c.current) {\r\n      c.unsetCurrent();\r\n      this.current = -1;\r\n    }\r\n    c = this.circles[25];\r\n    if(Math.abs(params.theta - c.theta) < DeltaRad) {\r\n      c.setCurrent(params.size)\r\n      this.current = 25;\r\n      return;\r\n    } else if(c.current) {\r\n      c.unsetCurrent();\r\n      this.current = -1;\r\n    }\r\n    for (var i = 1; i < 25; i++) {\r\n      c = this.circles[i];\r\n      if(Math.abs(params.phi - c.phi) < DeltaRad && Math.abs(params.theta - c.theta) < DeltaRad) {\r\n        if(c.current) {\r\n          continue;\r\n        }\r\n        c.setCurrent(params.size)\r\n        this.current = i;\r\n      } else if(c.current) {\r\n        c.unsetCurrent();\r\n        this.current = -1;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n* 参考圆圈\r\n* 为节省内存和提高性能，该类不再存储圆圈的顶点缓冲区。\r\n* 实际上该类存储的只是每个圆圈的位置等信息。\r\n* 在 SensorPoint 移动时检测 SensorPoint 是否与当前圆圈相近，\r\n* 若距离很近则会改变绘制方式（高亮）。\r\n* 2019/04/05 BriFuture\r\n* 高亮的实现方式是改变颜色和形状，这样做的效率并不高，更好的实现方式是修改 vsh 着色器代码，\r\n* 在着色器中对其高亮处理。\r\n**/\r\nclass SingleReferCircle extends PaintObj{\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"SingleReferCircle\";\r\n    if (props.pos !== undefined) {\r\n      this.setTranslation(props.pos[2], degToRad(props.pos[0]), degToRad(props.pos[1]));\r\n      this.setQuat(props.pos[0], props.pos[1]);\r\n    }\r\n    this.current = false;\r\n    this.drawMode = states.gl.LINES;\r\n    this.size = props.size || 1;\r\n    this.originColor = new Float32Array(props.color);\r\n\r\n    //    this.init();\r\n  }\r\n  \r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.fromRotationTranslationScale(this.mMatrix, this.quat, this.translation, this.vscale);\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setTranslation(r, theta, phi) {\r\n    if (theta !== undefined) {\r\n      this.theta = theta;\r\n    }\r\n\r\n    if (phi !== undefined) {\r\n      this.phi = phi;\r\n    }\r\n\r\n    this.translation = coordCarte(this.theta, this.phi, r);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setQuat(a_theta, a_phi, a_beta) {\r\n    quat.fromEuler(this.quat, 0, a_theta, a_phi);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setScale(size) {\r\n    this.size = size || this.size;\r\n    this.vscale = vec3.fromValues(this.size, this.size, this.size);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setCurrent(size) {\r\n    this.current = true;\r\n    this.color = new Float32Array([1.0, 0.0, 0.0]);\r\n    // console.log(\"set\", this.originColor, this.color)\r\n    this.drawMode = states.gl.LINE_LOOP;\r\n    \r\n    size *= 1.15;\r\n    this.setScale(size);\r\n  }\r\n  \r\n  unsetCurrent() {\r\n    this.current = false;\r\n    this.color[0] = this.originColor[0];\r\n    this.color[1] = this.originColor[1];\r\n    this.color[2] = this.originColor[2];\r\n    // console.log(\"unset\", this.originColor, this.color)\r\n    this.drawMode = states.gl.LINES;\r\n    this.setScale();\r\n  }\r\n\r\n  \r\n}\r\n// end of SingleReferCircle prototype\r\n\r\nexport {Sphere, RefCircle};","export default \"precision mediump float;\\r\\n\\r\\nattribute vec3 aVertexPosition;\\r\\nattribute vec3 aVertexNormal;\\r\\nattribute vec2 aTexture;\\r\\nattribute vec3 aColor;\\r\\n\\r\\nuniform mat4 uPMVMatrix;\\r\\nuniform mat4 uMMatrix;\\r\\nuniform mat4 uNMatrix;\\r\\nuniform vec3 uVertColor;\\r\\nuniform bool uSpecColor;\\r\\n\\r\\nuniform vec3  uLightDirection; // 直射光的方向\\r\\nvarying vec3  vLight;\\r\\nvarying vec2  vTexture;\\r\\nvarying vec3  vNormal;\\r\\nvarying vec3  vPosition;\\r\\n\\r\\n\\r\\nvoid main(void) {\\r\\n    gl_Position = uPMVMatrix * vec4(aVertexPosition, 1.0);\\r\\n\\r\\n    vec3 normal = normalize( vec3( uNMatrix * vec4( aVertexNormal, 1 ) ) );\\r\\n    vNormal = normal;\\r\\n    vPosition = vec3( uMMatrix * vec4( aVertexPosition , 1.0 ) );\\r\\n\\r\\n//    vec3 ambientLight     = vec3( 0.2, 0.24, 0.21 );\\r\\n//    vec3 directLightColor = vec3( 0.75, 0.75, 0.75 );\\r\\n//    float directional = max( dot( normal, normalize( uLightDirection ) ), 0.0);\\r\\n//    vec3 diffuse = directLightColor * directional;\\r\\n\\r\\n    if( !uSpecColor ) {\\r\\n//        vLight = aColor * (ambientLight + diffuse);\\r\\n        vLight = aColor;\\r\\n    } else {\\r\\n//        vLight = uVertColor * (ambientLight + diffuse);\\r\\n        vLight = uVertColor;\\r\\n    }\\r\\n    vTexture = aTexture;\\r\\n}\\r\\n\"","export default \"precision mediump float;\\r\\n\\r\\nvarying vec3  vLight;\\r\\nvarying vec2  vTexture;\\r\\nvarying vec3  vNormal;\\r\\nvarying vec3  vPosition;\\r\\n\\r\\nuniform float uAlpha;\\r\\nuniform vec3 uFragColor;\\r\\nuniform bool uHasTexture;\\r\\nuniform sampler2D uSampler;\\r\\n\\r\\n// uniform sampler2D uYSampler;\\r\\n// uniform sampler2D uZSampler;\\r\\n// uniform int uEnableTexture;\\r\\nvoid main(void) {\\r\\n    vec3 lightPos = vec3( 10, 10, 10 );\\r\\n    vec3 ambientLight = vec3( 0.28, 0.28, 0.28 );\\r\\n    vec3 directLightColor = vec3( 0.88, 0.88, 0.88 );\\r\\n    float directional = max( dot( normalize( vNormal ), normalize( lightPos - vPosition ) ), 0.0);        // 直接使用顶点的法线数据进行漫反射计算\\r\\n    vec3 diffuse = directLightColor * directional;\\r\\n\\r\\n    if( uHasTexture ) {\\r\\n//        vec4 color = mix( uFragColor, texture2D( uSampler, vec2( vTexture.s, vTexture.t ) ), 0.5 );\\r\\n        gl_FragColor = vec4( uFragColor * (diffuse + ambientLight), uAlpha );\\r\\n    }\\r\\n    else {\\r\\n        gl_FragColor = vec4( vLight * (diffuse + ambientLight), uAlpha );\\r\\n    }\\r\\n//   mediump vec4 xtextureColor = texture2D(uXSampler, vec2(vXTexture.s, vXTexture.t));\\r\\n//   mediump vec4 ytextureColor = texture2D(uYSampler, vec2(vXTexture.s, vXTexture.t));\\r\\n//   mediump vec4 ztextureColor = texture2D(uZSampler, vec2(vXTexture.s, vXTexture.t));\\r\\n//   if( uEnableTexture == 0 ) {\\r\\n//     gl_FragColor = vec4(vLight, uAlpha);\\r\\n//   }\\r\\n//   else if( uEnableTexture == 1 ) {\\r\\n//     gl_FragColor = vec4(vLight, 1.0) * xtextureColor;\\r\\n//   }\\r\\n//   else if( uEnableTexture == 2 ) {\\r\\n//     gl_FragColor = vec4(vLight, 1.0) * ytextureColor;}\\r\\n//   else if( uEnableTexture == 3 ) {\\r\\n//     gl_FragColor = vec4(vLight, 1.0) * ztextureColor;\\r\\n//   }\\r\\n}\\r\\n\"","/**\r\n * Author: BriFuture\r\n * update: 2019/03/27\r\n * Description: [Compass](https://github.com/BriFuture/Compass) 是这个程序的 QML 版本，\r\n * 利用 webpack 的打包功能重写了核心的 JS 绘图程序。\r\n * \r\n * License: GPLv3\r\n * Note: 默认 glMatrix 和 webgl-loader 已加载，并且 mat4, vec3 可以直接使用，否则程序运行会出错\r\n */\r\nexport const version = \"0.0.01\";\r\n\r\nimport {states, attributes, uniforms, attitude} from './Variables'\r\n//var nMatrix   = mat4.create();\r\nimport Coord from './Coord'\r\nimport {Camera, Scene} from './Scene'\r\nimport {SensorPoint, SensorPath, RecordPoint} from './SensorPoint'\r\nimport {Craft} from './Craft'\r\nimport {Sphere, RefCircle} from './Sphere'\r\n// const fs = require('fs')\r\n\r\nimport vertexCode from '!raw-loader!@/assets/SPVertexCode.vsh'\r\nimport fragCode from '!raw-loader!@/assets/SPFragCode.fsh'\r\n// this.url = \"qrc:/res/obj/craft.obj\";\r\nvar canvasArgs; // 相关绘图变量\r\n\r\nexport class SpacePath {\r\n  constructor() {\r\n    // var gl2d;  // this is used for HUD drawing\r\n    // return;\r\n    this.attributes = attributes;\r\n    this.uniforms = uniforms;\r\n    this.states = states;\r\n  }\r\n\r\n  // initializeGL(canvas, args) {\r\n  //   gl = canvas.getContext(\"canvas3d\",\r\n  //     { depth: true, antilias: true }\r\n  //   );\r\n  //   gl2d = canvas.getContext(\"2d\");\r\n\r\n  //   this.init();\r\n  // }\r\n\r\n  init(canvasGL) {\r\n    states.gl = canvasGL;\r\n    var scene = new Scene({});\r\n    this.scene = scene;\r\n    scene.initShaders(vertexCode, fragCode)\r\n    this.camera = new Camera({height: 600, width: 800});\r\n    scene.addCamera(this.camera)\r\n    this.coord = new Coord({});\r\n    scene.add(this.coord);\r\n  }\r\n\r\n  paintGL(canvas) {\r\n    var pixelRatio = canvas.devicePixelRatio;\r\n    var currentWidth = canvas.width * pixelRatio;\r\n    var currentHeight = canvas.height * pixelRatio;\r\n\r\n    if (currentWidth !== camera.width || currentHeight !== camera.height) {\r\n      this.camera.setSize(currentWidth, currentHeight);\r\n    }\r\n    this.scene.render();\r\n  }\r\n\r\n  setAttitude(attitude) {\r\n    this.sensorPoint.setParam(attitude)\r\n  }\r\n  hideAll() {\r\n    this.sensorPoint.visible = false;\r\n    this.sensorPath.visible = false;\r\n    this.recordPoint.visible = false;\r\n    this.refCircle.visible = false;\r\n    this.sphere.visible = false;\r\n  }\r\n\r\n  reset() {\r\n    this.sensorPoint.reset();\r\n    this.sensorPath.resetAllPath();\r\n    this.camera.reset();\r\n  }\r\n\r\n  defaultInit() {\r\n    this.addIndicator();\r\n    this.addSensorPath();\r\n    this.addRefCircle();\r\n    this.addRecordPoint();\r\n    this.addSphere();\r\n  }\r\n\r\n  /**\r\n   * 需要第一个添加\r\n   * @param {*} props \r\n   */\r\n  addIndicator(props) {\r\n    props = props || {\r\n      color: [1.0, 0.2, 0.1]\r\n    };\r\n    this.sensorPoint = new SensorPoint(props);\r\n    this.sensorPoint.init()\r\n    // 调整初始位置\r\n    this.sensorPoint.setParam({ dis: 4, pitch: 0, roll: 0, heading: 0 });\r\n    this.scene.add(this.sensorPoint, true);\r\n  }\r\n\r\n  addSensorPath(props) {\r\n    if(this.sensorPath === undefined) {\r\n      props = props || {color: [0.9, 0.5, 0.2] };\r\n      this.sensorPath = new SensorPath(props);\r\n      this.scene.add(this.sensorPath, true);\r\n      this.sensorPoint.addSphericalChange(this.sensorPath);\r\n    }\r\n  }\r\n\r\n  addRecordPoint(props) {\r\n    if(this.recordPoint === undefined) {\r\n      this.recordPoint = new RecordPoint(props);\r\n      this.scene.add(this.recordPoint, true);\r\n      this.sensorPoint.addSphericalChange(this.recordPoint);\r\n      this.sensorPoint.update();\r\n    }\r\n  }\r\n\r\n  addRefCircle(props) {\r\n    if (this.refCircle === undefined) {\r\n      this.refCircle = new RefCircle(props);\r\n      this.scene.add(this.refCircle, true);\r\n      this.sensorPoint.addSphericalChange(this.refCircle);\r\n      this.sensorPoint.update();\r\n    }\r\n  }\r\n\r\n  /** 开始执行实际的绘图操作，由于开启了 ALPHA BLEND 功能，先绘制球内物体 **/  \r\n  addSphere(props) {\r\n    if(this.sphere === undefined) {\r\n      props = props || {\r\n        color: [0.95, 0.2, 0.2],\r\n        vn: 48,\r\n        hn: 48\r\n      };\r\n      this.sphere = new Sphere(props);\r\n      this.sphere.init()\r\n      this.scene.add(this.sphere);\r\n    } \r\n  }\r\n\r\n\r\n  addCraft(props) {\r\n    if (this.craft === undefined) {\r\n      this.craft = new Craft(props || {});\r\n      this.scene.add(this.craft, true);\r\n      this.sensorPoint.addSphericalChange(this.craft);\r\n      this.sensorPoint.update();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  resizeGL(canvas) {\r\n    var pixelRatio = canvas.devicePixelRatio;\r\n    canvas.pixelSize = Qt.size(canvas.width * pixelRatio, canvas.height * pixelRatio);\r\n  }\r\n}\r\n\r\n\r\n/** Test: to watch variables change **/\r\nclass Test {\r\n  constructor() {\r\n    this._x = 0;\r\n    this._y = 0;\r\n    this._z = 0;\r\n  }\r\n}\r\n\r\n/**\r\n* this function is copied from planets demo of qt version of threejs\r\n* I modified some of it, now it works fine for me\r\n**/\r\nfunction readFile(url, onLoad, onProgress, onError) {\r\n  var request = new XMLHttpRequest();\r\n\r\n  request.onreadystatechange = function () {\r\n    if (request.readyState === XMLHttpRequest.DONE) {\r\n      // TODO: Re-visit https://bugreports.qt.io/browse/QTBUG-45581 is solved in Qt\r\n      if (request.status == 200 || request.status == 0) {\r\n        //                var response;\r\n        // TODO: Remove once https://bugreports.qt.io/browse/QTBUG-45862 is fixed in Qt\r\n        //                response = request.responseText;\r\n\r\n        console.time('Process file: \"' + url + '\"');\r\n        onLoad(request.responseText);\r\n        console.timeEnd('Process file: \"' + url + '\"');\r\n\r\n      }\r\n      //              else if ( onError !== undefined ) {\r\n      //                onError();\r\n      //            }\r\n    }\r\n    //        else if (request.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n    //            if ( onProgress !== undefined ) {\r\n    //                onProgress();\r\n    //            }\r\n    //        }\r\n  };\r\n\r\n  request.open('GET', url, true);\r\n  request.send(null);\r\n}\r\nwindow.SpacePath = SpacePath;\r\nexport default { SpacePath }","import { SpacePath } from \"./compass/SpacePath\";\r\n// import craftObj from '!raw-loader!@/assets/craft.obj'\r\n\r\nconst spacepath = new SpacePath();\r\nexport {spacepath}\r\n\r\nexport function radToDeg(rad) {\r\n    return rad * 180 / Math.PI;\r\n}\r\nexport var cameraParam = {\r\n    camera: null,\r\n    dwy: 0,\r\n    wratio: 0.01,\r\n    dragged: false,\r\n    dx: 0, \r\n    dy: 0,\r\n    lastPos: null,\r\n    curPos: null,\r\n    yratio: 0.25,\r\n    xratio: 0.3,\r\n}\r\n\r\nexport function wheelScroll(event) {\r\n    cameraParam.dwy = event.deltaY * cameraParam.wratio + cameraParam.camera.dis;\r\n    cameraParam.camera.rotate(null, null, cameraParam.dwy);\r\n    event.preventDefault();\r\n    return false;\r\n}\r\n\r\nexport function onMouseUp(event) {\r\n    cameraParam.dragged = false;\r\n}\r\n\r\nexport function onMouseMove(e) {\r\n    cameraParam.curPos = getMousePos(cameraParam.canvas, e);\r\n    if(cameraParam.dragged) {\r\n        // console.log(camera.theta)\r\n\r\n        cameraParam.dx = (cameraParam.lastPos.x - cameraParam.curPos.x) * cameraParam.xratio + radToDeg(cameraParam.camera.phi);\r\n        cameraParam.dy = (cameraParam.lastPos.y - cameraParam.curPos.y) * cameraParam.yratio + radToDeg(cameraParam.camera.theta);\r\n        if(cameraParam.dx < 0) {\r\n            cameraParam.dx += 360;\r\n        } else if(cameraParam.dx > 360) {\r\n            cameraParam.dx -= 360;\r\n        }\r\n        // console.log(dy, dx)\r\n        cameraParam.camera.rotate(cameraParam.dy, cameraParam.dx);\r\n        cameraParam.lastPos = cameraParam.curPos;\r\n    }\r\n}\r\n\r\nexport function onMouseDown(e) {\r\n    cameraParam.lastPos = getMousePos(cameraParam.canvas, e)\r\n    cameraParam.dragged = true;\r\n}\r\n\r\nfunction getMousePos(canvasDom, mouseEvent) {\r\n    var rect = canvasDom.getBoundingClientRect();\r\n    return {\r\n        x: mouseEvent.clientX - rect.left,\r\n        y: mouseEvent.clientY - rect.top\r\n    }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',{attrs:{\"header\":\"相机设置\"}},[_c('b-btn',{on:{\"click\":function($event){return _vm.resetCamera()}}},[_vm._v(\"重置位置\")]),_c('div',[_vm._v(\"\\n    摄像机θ角(与Z轴正半轴夹角): \"+_vm._s(_vm.cameraTheta.toFixed(1))+\"\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"cameraTheta\",\"value\":_vm.cameraTheta,\"min\":\"0\",\"max\":\"180\"},on:{\"change\":function($event){return _vm.cameraThetaChanged($event)}}})],1),_c('div',[_vm._v(\"\\n    摄像机φ角(与X轴正半轴夹角): \"+_vm._s(_vm.cameraPhi.toFixed(1))+\"\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"cameraPhi\",\"value\":_vm.cameraPhi,\"min\":\"0\",\"max\":\"360\"},on:{\"change\":function($event){return _vm.cameraPhiChanged($event)}}})],1),_c('div',[_vm._v(\"\\n    摄像机距原点: \"+_vm._s(_vm.cameraDis.toFixed(1))+\"\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"cameraDis\",\"value\":_vm.cameraDis,\"min\":\"1\",\"max\":\"180\"},on:{\"change\":function($event){return _vm.cameraDisChanged($event)}}})],1),_c('b-checkbox',{model:{value:(_vm.sphereCoord),callback:function ($$v) {_vm.sphereCoord=$$v},expression:\"sphereCoord\"}},[_vm._v(\"球坐标系\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-card header=\"相机设置\">\r\n    <b-btn @click=\"resetCamera()\">重置位置</b-btn>\r\n    <div>\r\n      摄像机θ角(与Z轴正半轴夹角): {{ cameraTheta.toFixed(1) }}\r\n      <b-form-input\r\n        type=\"range\"\r\n        id=\"cameraTheta\"\r\n        :value=\"cameraTheta\"\r\n        min=\"0\"\r\n        max=\"180\"\r\n        @change=\"cameraThetaChanged($event)\"\r\n      />\r\n    </div>\r\n    <div>\r\n      摄像机φ角(与X轴正半轴夹角): {{ cameraPhi.toFixed(1) }}\r\n      <b-form-input\r\n        type=\"range\"\r\n        id=\"cameraPhi\"\r\n        :value=\"cameraPhi\"\r\n        min=\"0\"\r\n        max=\"360\"\r\n        @change=\"cameraPhiChanged($event)\"\r\n      />\r\n    </div>\r\n    <div>\r\n      摄像机距原点: {{cameraDis.toFixed(1)}}\r\n      <b-form-input\r\n        type=\"range\"\r\n        id=\"cameraDis\"\r\n        :value=\"cameraDis\"\r\n        min=\"1\"\r\n        max=\"180\"\r\n        @change=\"cameraDisChanged($event)\"\r\n      />\r\n    </div>\r\n    <b-checkbox v-model=\"sphereCoord\">球坐标系</b-checkbox>\r\n  </b-card>\r\n</template>\r\n\r\n<script>\r\nimport {radToDeg} from '@/states'\r\nexport default {\r\n  props: {\r\n    camera: {\r\n      type: Object,\r\n      default: {\r\n        theta: 0,\r\n        phi: 0,\r\n        dis: 4\r\n      },\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      sphereCoord: true,\r\n    }\r\n  },\r\n  computed: {\r\n    cameraPhi() {\r\n      return radToDeg(this.camera.phi);\r\n    }, \r\n    cameraTheta() {\r\n      return radToDeg(this.camera.theta);\r\n    },\r\n    cameraDis() {\r\n      return this.camera.dis;\r\n    },\r\n  },\r\n  methods: {\r\n    cameraPhiChanged(value) {\r\n      this.camera.rotate(null, value, null);\r\n    },\r\n    cameraThetaChanged(value) {\r\n      this.camera.rotate(value, null, null);\r\n    },\r\n    cameraDisChanged(value) {\r\n      this.camera.rotate(null, null, value);\r\n    },\r\n    resetCamera() {\r\n      this.camera.reset()\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CameraSetting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CameraSetting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CameraSetting.vue?vue&type=template&id=3d567faa&\"\nimport script from \"./CameraSetting.vue?vue&type=script&lang=js&\"\nexport * from \"./CameraSetting.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',{class:{nopadding: !_vm.sphere.visible},attrs:{\"header\":\"球体参数设置\"}},[_c('template',{slot:\"header\"},[_c('b-checkbox',{model:{value:(_vm.sphere.visible),callback:function ($$v) {_vm.$set(_vm.sphere, \"visible\", $$v)},expression:\"sphere.visible\"}},[_vm._v(\"显示球体\")])],1),(_vm.sphere.visible)?_c('b-card-body',[_c('div',[_vm._v(\"\\n      参考球半径: \"+_vm._s(_vm.sphere.size)+\"\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"sphereRadius\",\"value\":_vm.sphere.size,\"min\":\"1\",\"max\":\"10\"},on:{\"change\":function($event){return _vm.sphereRadiusChanged($event)}}})],1),_c('div',[_vm._v(\"球面透明度: \"+_vm._s(_vm.sphereAlpha)+\"\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"sphereOpacity\",\"value\":_vm.sphereAlpha,\"min\":\"0\",\"max\":\"100\"},on:{\"change\":function($event){_vm.sphere.alpha = parseFloat($event) / 100}}})],1),_c('b-form-group',{attrs:{\"label\":\"绘制球体的模式\"}},[_c('b-radio-group',{staticClass:\"sphereMode\",model:{value:(_vm.sphere.drawMode),callback:function ($$v) {_vm.$set(_vm.sphere, \"drawMode\", $$v)},expression:\"sphere.drawMode\"}},[_c('div',[_c('b-radio',{attrs:{\"value\":0}},[_vm._v(\"Surface\")])],1),_c('div',[_c('b-radio',{attrs:{\"value\":1}},[_vm._v(\"Line\")])],1),_c('div',[_c('b-radio',{attrs:{\"value\":2}},[_vm._v(\"lessLine\")])],1)])],1)],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-card header=\"球体参数设置\" :class=\"{nopadding: !sphere.visible}\">\r\n    <template slot=\"header\">\r\n      <b-checkbox v-model=\"sphere.visible\">显示球体</b-checkbox>\r\n    </template>\r\n    <b-card-body v-if=\"sphere.visible\">\r\n      <div>\r\n        参考球半径: {{sphere.size}}\r\n        <b-form-input\r\n          type=\"range\"\r\n          id=\"sphereRadius\"\r\n          :value=\"sphere.size\"\r\n          min=\"1\"\r\n          max=\"10\"\r\n          @change=\"sphereRadiusChanged($event)\"\r\n        />\r\n      </div>\r\n      <div>球面透明度: {{sphereAlpha}}\r\n        <b-form-input type=\"range\" id=\"sphereOpacity\" :value=\"sphereAlpha\" min=\"0\" max=\"100\" \r\n          @change=\"sphere.alpha = parseFloat($event) / 100\" />\r\n      </div>\r\n      <b-form-group label=\"绘制球体的模式\">\r\n        <b-radio-group v-model=\"sphere.drawMode\" class=\"sphereMode\">\r\n          <div>\r\n            <b-radio :value=\"0\">Surface</b-radio>\r\n          </div>\r\n          <div>\r\n            <b-radio :value=\"1\">Line</b-radio>\r\n          </div>\r\n          <div>\r\n            <b-radio :value=\"2\">lessLine</b-radio>\r\n          </div>\r\n        </b-radio-group>\r\n      </b-form-group>\r\n    </b-card-body>\r\n  </b-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    sphere:{\r\n      type: Object,\r\n      default: {\r\n        size: 4,\r\n        alpha: 1,\r\n        drawMode: 0,\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    sphereAlpha() {\r\n      return this.sphere.alpha * 100;\r\n    },\r\n  },\r\n  methods: {\r\n        \r\n    sphereRadiusChanged(value) {\r\n      this.sphere.setSize(value);\r\n      // this.camera.rotate()\r\n    },\r\n  }\r\n  \r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SphereSetting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SphereSetting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SphereSetting.vue?vue&type=template&id=459c62c8&\"\nimport script from \"./SphereSetting.vue?vue&type=script&lang=js&\"\nexport * from \"./SphereSetting.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',{class:{nopadding: !_vm.craft.visible},attrs:{\"header\":\"模拟器参数设置\"}},[_c('template',{slot:\"header\"},[_c('b-checkbox',{on:{\"change\":function($event){return _vm.paintCraft($event)}}},[_vm._v(\"绘制模拟器\")])],1),(_vm.craft.visible)?_c('b-card-body',[_c('div',{class:{disable: !_vm.craft.visible }},[_vm._v(\"\\n      模拟器大小: \"+_vm._s(_vm.craft.size)+\"\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"craftSize\",\"value\":_vm.craft.size,\"min\":\"0.1\",\"max\":\"3\",\"step\":\"0.1\"},on:{\"change\":function($event){return _vm.setCraftSize($event)}}})],1),_c('div',{},[_vm._v(\"\\n      模拟器headingOffset: \"+_vm._s(_vm.craft.headingOffset)+\"\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"craftHO\",\"value\":_vm.craft.headingOffset,\"min\":\"0\",\"max\":\"360\",\"step\":\"45\"},on:{\"change\":function($event){return _vm.changeHeadingOffset($event)}}})],1),_c('div',{},[_vm._v(\"\\n      模拟器pitchOffset: \"+_vm._s(_vm.craft.pitchOffset)+\"\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"craftPO\",\"value\":_vm.craft.pitchOffset,\"min\":\"0\",\"max\":\"180\",\"step\":\"45\"},on:{\"change\":function($event){return _vm.changePitchOffset($event)}}})],1),_c('div',{},[_vm._v(\"\\n      模拟器rollOffset: \"+_vm._s(_vm.craft.rollOffset)+\"\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"craftRO\",\"value\":_vm.craft.rollOffset,\"min\":\"0\",\"max\":\"360\",\"step\":\"45\"},on:{\"change\":function($event){return _vm.changeRollOffset($event)}}})],1)]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-card header=\"模拟器参数设置\" :class=\"{nopadding: !craft.visible}\">\r\n    <template slot=\"header\">\r\n      <b-checkbox @change=\"paintCraft($event)\">绘制模拟器</b-checkbox>\r\n    </template>\r\n    <b-card-body v-if=\"craft.visible\">\r\n      <div :class=\"{disable: !craft.visible }\">\r\n        模拟器大小: {{craft.size}}\r\n        <b-form-input\r\n          type=\"range\"\r\n          id=\"craftSize\"\r\n          :value=\"craft.size\"\r\n          min=\"0.1\"\r\n          max=\"3\"\r\n          step=\"0.1\"\r\n          @change=\"setCraftSize($event)\"\r\n        />\r\n      </div>\r\n      <div class>\r\n        模拟器headingOffset: {{craft.headingOffset}}\r\n        <b-form-input\r\n          type=\"range\"\r\n          id=\"craftHO\"\r\n          :value=\"craft.headingOffset\"\r\n          min=\"0\"\r\n          max=\"360\"\r\n          step=\"45\"\r\n          @change=\"changeHeadingOffset($event)\"\r\n        />\r\n      </div>\r\n      <div class>\r\n        模拟器pitchOffset: {{craft.pitchOffset}}\r\n        <b-form-input\r\n          type=\"range\"\r\n          id=\"craftPO\"\r\n          :value=\"craft.pitchOffset\"\r\n          min=\"0\"\r\n          max=\"180\"\r\n          step=\"45\"\r\n          @change=\"changePitchOffset($event)\"\r\n        />\r\n      </div>\r\n      <div class>\r\n        模拟器rollOffset: {{craft.rollOffset}}\r\n        <b-form-input\r\n          type=\"range\"\r\n          id=\"craftRO\"\r\n          :value=\"craft.rollOffset\"\r\n          min=\"0\"\r\n          max=\"360\"\r\n          step=\"45\"\r\n          @change=\"changeRollOffset($event)\"\r\n        />\r\n      </div>\r\n    </b-card-body>\r\n  </b-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    craft: Object,\r\n  },\r\n  methods: {\r\n    paintCraft(value) {\r\n      if(value) {       \r\n        this.$emit(\"initCraft\");\r\n      }\r\n      this.craft.visible = value;\r\n    },\r\n    changePitchOffset(value) {\r\n      this.craft.pitchOffset = parseFloat(value);\r\n    },\r\n    changeHeadingOffset(value) {\r\n      this.craft.headingOffset = parseFloat(value);\r\n    },\r\n    changeRollOffset(value) {\r\n      this.craft.rollOffset = parseFloat(value);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.nopadding > .card-body {\r\n  padding: 0\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CraftSetting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CraftSetting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CraftSetting.vue?vue&type=template&id=7a408ae6&\"\nimport script from \"./CraftSetting.vue?vue&type=script&lang=js&\"\nexport * from \"./CraftSetting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CraftSetting.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n<div>\r\n  <b-checkbox v-model=\"scene.running\" @change=\"setSceneRun($event)\">实时更新 3D 图像</b-checkbox>\r\n  <craft-setting :craft=\"craft\" @initCraft=\"initCraft()\" ></craft-setting>\r\n  <b-card header=\"其他参数设置\"> \r\n    <div class=\"option\">\r\n      <b-checkbox v-model=\"sensorPath.visible\">绘制路径</b-checkbox>\r\n      <b-btn @click=\"resetPath()\">重置路径</b-btn>\r\n      <div>轨迹宽度 {{pathWidth}}\r\n        <b-form-input type=\"range\" id=\"pathWidth\" :value=\"pathWidth\" min=\"1\" max=\"100\" \r\n          @change=\"setPathWidth($event)\" />\r\n      </div>\r\n      <b-checkbox v-model=\"refCircle.visible\">显示修正圆圈</b-checkbox>\r\n    </div>\r\n    <div class=\"action\">\r\n      <b-btn @click=\"recordPoint()\" class=\"mx-4\">打点</b-btn>\r\n      <b-btn @click=\"resetRecordedPoint()\" class=\"mx-4\">重置打点</b-btn>\r\n    </div>\r\n\r\n    <div>指示器大小: {{indicatorSize.toFixed(1)}}\r\n      <b-form-input type=\"range\" id=\"indicatorSize\" :value=\"indicatorSize\" min=\"1\" max=\"100\" \r\n        @change=\"setIndicatorSize($event)\" />\r\n    </div>\r\n    <div class=\"\">修正圆圈大小\r\n      <b-form-input type=\"range\" id=\"refCircleSize\" :value=\"refCircle.size\" min=\"0.1\" max=\"1\" step=\"0.01\" \r\n        @change=\"setRefCircleSize($event)\" />\r\n    </div>\r\n  </b-card>\r\n  <camera-setting :camera=\"camera\" />\r\n  <sphere-setting :sphere=\"sphere\" />\r\n</div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {spacepath} from '@/states'\r\nimport { setTimeout } from 'timers';\r\nimport CameraSetting from './CameraSetting'\r\nimport SphereSetting from './SphereSetting'\r\nimport CraftSetting from './CraftSetting'\r\nconst craftObj = import('!raw-loader!@/assets/craft.obj')\r\nexport default {\r\n  components: {\r\n    CameraSetting,\r\n    SphereSetting,\r\n    CraftSetting\r\n  },\r\n  data() {\r\n    return {\r\n      scene: { \r\n        running: true\r\n      },\r\n      camera: {\r\n        theta: 0,\r\n        phi: 0,\r\n        dis: 4\r\n      },\r\n      sphere: {\r\n        size: 4,\r\n        alpha: 1,\r\n        drawMode: 0,\r\n      },\r\n      indicator: {\r\n        size: 1\r\n      },\r\n      sensorPath: {\r\n        visible: true,\r\n        size: 1\r\n      },\r\n      refCircle: {\r\n        visible: true,\r\n        size: 1\r\n      },\r\n      craft: { \r\n        visible: false,\r\n        size: 1,\r\n        headingOffset: 0,\r\n        pitchOffset: 0,\r\n        rollOffset: 0,\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n\r\n    indicatorSize() {\r\n      return this.indicator.size * 100;\r\n    },\r\n    pathWidth() {\r\n      return this.sensorPath.size;\r\n    }\r\n  },\r\n  methods: {\r\n    setSceneRun(value) {\r\n      if(value) {\r\n        this.scene.render()\r\n      }\r\n    },\r\n    recordPoint() {\r\n      this.spacepath.recordPoint.record();\r\n      let msg = JSON.stringify({type: 'action', record: true});\r\n      this.$socket.send(msg);\r\n    },\r\n    resetRecordedPoint() {\r\n      this.spacepath.recordPoint.reset();\r\n      let msg = JSON.stringify({type: 'action', resetRecord: true});\r\n      this.$socket.send(msg);\r\n    },\r\n    setIndicatorSize(value) {\r\n      this.indicator.setScale(parseFloat(value) / 100);\r\n    },\r\n    setPathWidth(value) {\r\n      this.sensorPath.setSize(value);\r\n    },\r\n    setRefCircleSize(value) {\r\n      this.refCircle.setScale(parseFloat(value));\r\n    },\r\n    setCraftSize(value) {\r\n      if(this.craft.visible) {\r\n        this.craft.setScale(value);\r\n      }\r\n    },\r\n    initCraft() {\r\n      // this.spacepath.addCraft({obj: craftObj});\r\n      this.spacepath.addCraft({});\r\n      this.craft = this.spacepath.craft;\r\n      this.craft.init(craftObj)\r\n      this.craft.headingOffset = 270\r\n      this.craft.pitchOffset = 90\r\n      this.craft.setRotation({})\r\n    },\r\n    resetPath() {\r\n      this.sensorPath.resetAllPath();\r\n    },\r\n    init(spacepath) {\r\n      this.spacepath = spacepath;\r\n      // console.log(spacepath)\r\n      this.scene = spacepath.scene;\r\n      this.camera = spacepath.camera;\r\n      if(spacepath.sphere) {\r\n        this.sphere = spacepath.sphere;\r\n      }\r\n      if(spacepath.sensorPoint) {\r\n        this.indicator = spacepath.sensorPoint;\r\n        this.indicator.setScale(0.4);\r\n      }\r\n      if(spacepath.sensorPath) {\r\n        this.sensorPath = spacepath.sensorPath;\r\n      }\r\n      if(spacepath.refCircle) {\r\n        this.refCircle = spacepath.refCircle;\r\n        this.refCircle.setScale(0.5)\r\n      }\r\n      // console.log(craftObj)\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log(\"Sidebar Mounted\")\r\n    setTimeout(() => {\r\n      this.init(spacepath)\r\n    }, 500)\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=06d46ce0&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_vm._v(\"Heading: \"+_vm._s(_vm.heading))]),_c('div',[_vm._v(\"Picth: \"+_vm._s(_vm.pitch))]),_c('div',[_vm._v(\"Roll: \"+_vm._s(_vm.roll))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div>\r\n  <div>Heading: {{ heading }}</div>\r\n  <div>Picth: {{ pitch }}</div>\r\n  <div>Roll: {{ roll }}</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    data: Object\r\n  },\r\n  computed: {\r\n    heading() {\r\n      if(this.data.heading)\r\n        return this.data.heading.toFixed(2);\r\n      return 0;\r\n    },\r\n    pitch() {\r\n      if(this.data.pitch)\r\n        return this.data.pitch.toFixed(2);\r\n      return 0;\r\n    },\r\n    roll() {\r\n      if(this.data.roll)\r\n        return this.data.roll.toFixed(2);\r\n      return 0;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Information.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Information.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Information.vue?vue&type=template&id=567c7bd0&\"\nimport script from \"./Information.vue?vue&type=script&lang=js&\"\nexport * from \"./Information.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_vm._v(\"Heading: \"+_vm._s(_vm.heading)+\"\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"heading\",\"value\":_vm.data.heading,\"min\":\"0\",\"max\":\"360\"},on:{\"change\":function($event){return _vm.$emit('valueChanged', {'key': 'heading', 'value': $event})}}})],1),_c('div',[_vm._v(\"Picth: \"+_vm._s(_vm.data.pitch.toFixed(2))+\"\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"pitch\",\"value\":_vm.data.pitch,\"min\":\"-90\",\"max\":\"90\"},on:{\"change\":function($event){return _vm.$emit('valueChanged', {'key': 'pitch', 'value': $event})}}})],1),_c('div',[_vm._v(\"Roll: \"+_vm._s(_vm.data.roll.toFixed(2))+\"\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"roll\",\"value\":_vm.data.roll,\"min\":\"0\",\"max\":\"180\"},on:{\"change\":function($event){return _vm.$emit('valueChanged', {'key': 'roll', 'value': $event})}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div>Heading: {{heading}}\r\n      <b-form-input type=\"range\" id=\"heading\" :value=\"data.heading\" min=\"0\" max=\"360\" \r\n        @change=\"$emit('valueChanged', {'key': 'heading', 'value': $event})\" />\r\n    </div>\r\n    <div>Picth: {{data.pitch.toFixed(2)}}\r\n      <b-form-input type=\"range\" id=\"pitch\" :value=\"data.pitch\" min=\"-90\" max=\"90\"\r\n        @change=\"$emit('valueChanged', {'key': 'pitch', 'value': $event})\"/>\r\n    </div>\r\n    <div>Roll: {{data.roll.toFixed(2)}}\r\n      <b-form-input type=\"range\" id=\"roll\" :value=\"data.roll\" min=\"0\" max=\"180\"\r\n        @change=\"$emit('valueChanged', {'key': 'roll', 'value': $event})\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    data: Object,\r\n  },\r\n  computed: {\r\n    heading() {\r\n      return this.data.heading.toFixed(2)\r\n    }\r\n  }\r\n  // data() {\r\n  //   return {\r\n  //     heading: 0,\r\n  //     pitch: 0,\r\n  //     roll: 0,\r\n  //   }\r\n  // }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DebugPanel.vue?vue&type=template&id=230ee897&\"\nimport script from \"./DebugPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./DebugPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <b-container fluid id=\"app\">\r\n    <!-- <script type=\"text/javascript\" src=\"@/components/gl-matrix-min.js\"></script> -->\r\n    <canvas ref=\"canvas\" id=\"canvas\" v-bind:width=\"canvasWidth\" v-bind:height=\"canvasHeight\"></canvas>\r\n\r\n    <div >\r\n      <b-row class=\"panel\">\r\n        <b-col cols=\"6\" md=\"3\" lg=\"2\" class=\"full-height px-0 float-right subpanel\" v-bind:style=\"{'height':canvasHeight+'px'}\">\r\n          <c-sidebar v-show=\"showSidebar\" ref=\"sidebar\" class=\"\"></c-sidebar>\r\n        </b-col>\r\n        <b-col cols=\"6\" md=\"6\" lg=\"8\"  ref=\"panel\">\r\n          <b-checkbox v-model=\"showSidebar\"   class=\"d-inline-block mx-4\">显示控制面板</b-checkbox> \r\n          <b-checkbox v-model=\"showDebugInfo\" class=\"d-inline-block mx-4\">显示调试信息</b-checkbox>\r\n        </b-col>\r\n        <b-col cols=\"6\" md=\"3\" lg=\"2\" class=\"full-height\" v-bind:style=\"{'height':canvasHeight+'px'}\">\r\n          <div v-show=\"showDebugInfo\" class=\"subpanel\">\r\n            <c-debug-panel :data=\"data\" @valueChanged=\"debugValueChanged($event)\" ></c-debug-panel>\r\n            <c-information :data=\"data\"></c-information>\r\n          </div>\r\n        </b-col>\r\n      </b-row>\r\n    </div>\r\n\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport CSidebar from './components/Sidebar.vue'\r\nimport CInformation from './components/Information.vue'\r\nimport CDebugPanel from './components/DebugPanel.vue'\r\nimport {spacepath, radToDeg, wheelScroll, onMouseUp, onMouseMove, onMouseDown, cameraParam} from './states'\r\n\r\n\r\nexport default {\r\n  name: 'app',\r\n  components: {\r\n    CSidebar,\r\n    CInformation,\r\n    CDebugPanel\r\n  },\r\n  data() {\r\n    return {\r\n      canvasWidth: 800,\r\n      canvasHeight: 600,\r\n      data: {\r\n        heading: 0,\r\n        pitch: 0,\r\n        roll: 0,\r\n      },\r\n      showSidebar: true,\r\n      showDebugInfo: true,\r\n    }\r\n  },\r\n  created() {\r\n    // console.log(this.$refs)\r\n    // this.sp = new SpacePath()\r\n  },\r\n  mounted() {\r\n    this.$debug = {\"heading\": 0, \"pitch\": 0, \"roll\": 0}\r\n    console.log(\"SpacePath is Mounted\")\r\n    var canvas = this.$refs.canvas;\r\n    var gl = canvas.getContext('webgl',\r\n      { depth: true, antilias: true }\r\n    );\r\n    this.spacepath = spacepath;\r\n    this.spacepath.init(gl);\r\n    this.spacepath.defaultInit();\r\n    this.spacepath.scene.render();\r\n\r\n    cameraParam.camera = this.spacepath.camera;\r\n    cameraParam.canvas = canvas;\r\n    var panel = this.$refs.panel;\r\n    panel.addEventListener('mousedown', onMouseDown);\r\n    panel.addEventListener('mousemove', onMouseMove);\r\n    panel.addEventListener('mouseup', onMouseUp);\r\n    panel.addEventListener('wheel', wheelScroll, false);\r\n\r\n    // socket.IO\r\n    // this.$socket.emit('connect');\r\n    // nativeSocket\r\n    // this.$socket.send('test')\r\n    this.canvasWidth = window.innerWidth;\r\n    this.canvasHeight = window.innerHeight;\r\n    this.spacepath.camera.setSize(window.innerWidth, window.innerHeight);\r\n    window.addEventListener(\"resize\", (e) => {\r\n      this.canvasWidth = window.innerWidth - 2;\r\n      this.canvasHeight = window.innerHeight - 2;\r\n      this.spacepath.camera.setSize(this.canvasWidth, this.canvasHeight);\r\n        // console.log(\"Resource conscious resize callback!\", e);\r\n    });\r\n    this.registerSockets()\r\n  },\r\n  methods: {\r\n    debugValueChanged(event) {\r\n      this.$set(this.data, event.key, parseFloat(event.value))\r\n      // console.log(this.data, typeof(this.data.heading))\r\n      this.spacepath.setAttitude(this.data)\r\n      // console.log(event);\r\n    },\r\n    registerSockets() {\r\n      /**\r\n       * data: { type: 'feedHPR', heading: 0 , ...}\r\n       * or {type: 'action', idx: 99, record: true ...}\r\n       */\r\n      this.$options.sockets.onmessage = (msg) => {\r\n        // console.log('socket recv: ', msg.data)\r\n        let data = JSON.parse(msg.data)\r\n        // console.log('socket recv after: ', data)\r\n        if(data.type === \"feedHPR\") {\r\n          this.data.heading = data.heading;\r\n          this.data.pitch = data.pitch;\r\n          this.data.roll = data.roll;\r\n          this.spacepath.setAttitude(this.data)\r\n\r\n        } else if(data.type === \"action\") {\r\n          /**\r\n           * example of `data`: { idx: 99, record: true, resetRecord: true, resetPath: true }\r\n           * response: { idx, status: 'ok' }\r\n           */\r\n          // first reset all records and then record one\r\n          // console.log(\"action:\", data)\r\n          if(data.resetRecord) {\r\n            this.spacepath.recordPoint.reset();\r\n          }\r\n          if(data.record) {\r\n            this.spacepath.recordPoint.record();\r\n          }\r\n          if(data.resetPath) {\r\n            this.spacepath.sensorPath.resetAllPath()\r\n          }\r\n          this.$socket.send( JSON.stringify({idx: data.idx, status: 'ok' }) );\r\n        }\r\n      };\r\n    },\r\n  },\r\n  sockets: {\r\n    connect: function () {\r\n        console.log('socket connected')\r\n    },\r\n    feedHPR(data) {\r\n      this.data = data;\r\n      this.spacepath.setAttitude(data)\r\n      // console.log(this.spacepath.attitude)\r\n        // console.log('this method was fired by the socket server. eg: io.emit(\"customEmit\", data)')\r\n    },\r\n    action(data) {\r\n      /**\r\n       * example of `data`: { idx: 99, record: true, resetRecord: true, resetPath: true }\r\n       * response: { idx, status: 'ok' }\r\n       */\r\n      // first reset all records and then record one\r\n      // console.log(\"action:\", data)\r\n      if(data.resetRecord) {\r\n        this.spacepath.recordPoint.reset();\r\n      }\r\n      if(data.record) {\r\n        this.spacepath.recordPoint.record();\r\n      }\r\n      if(data.resetPath) {\r\n        this.spacepath.sensorPath.resetAllPath()\r\n      }\r\n      this.$socket.emit('response', {idx: data.idx, status: 'ok' } )\r\n      // console.log(\"Test my response\", data);\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  padding: 0;\r\n  /* margin-top: 60px; */\r\n}\r\n#canvas {\r\n  margin: 0;\r\n  padding: 0;\r\n  z-index: 100;\r\n  /* display: ; */\r\n  /* position: fixed; */\r\n}\r\n\r\nhtml body {\r\n  overflow: hidden;\r\n}\r\n\r\n.full-height {\r\n  height: 100%;\r\n}\r\n\r\n.panel {\r\n  position: absolute;\r\n  left: 5px;\r\n  padding: 0;\r\n  margin: 0;\r\n  /* padding-left: 20px; */\r\n  top: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  /* z-index: 100; */\r\n  -moz-user-select: -moz-none; \r\n  -moz-user-select: none; \r\n  -o-user-select:none; \r\n  -khtml-user-select:none; \r\n  -webkit-user-select:none; \r\n  -ms-user-select:none; \r\n  user-select:none;\r\n\r\n}\r\n\r\n.subpanel {\r\n  overflow-y: auto;\r\n  height: 100%;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=459ada90&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport BootstrapVue from 'bootstrap-vue'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\r\nVue.use(BootstrapVue);\r\n\r\nconst wsPort = 4900; // location.port\r\n// for qt webengineview\r\nconst namespace = \"/\"\r\nconst socketIOAddr = 'ws://localhost:' + wsPort + namespace; \r\n// const socketIOAddr = location.protocol + '//' + document.domain + ':' + wsPort + namespace;\r\nconsole.info(\"socketio:\", socketIOAddr)\r\n// import SocketIO from 'socket.io-client';\r\n// import VueSocketIO from 'vue-socket.io'\r\n// const options = { path: '/socket.io', origins:socketIOAddr };\r\n// Vue.use(new VueSocketIO({\r\n//   debug: false,\r\n//   connection: SocketIO(socketIOAddr, options), //options object is Optional\r\n//   // connection: socketIOAddr, //options object is Optional\r\n// })\r\n// );\r\nimport VueNativeSock from 'vue-native-websocket'\r\nVue.use(VueNativeSock, socketIOAddr, { format: 'json' })\r\n\r\nVue.config.productionTip = false\r\n\r\nconst vm = new Vue({\r\n  render: h => h(App),\r\n}).$mount('#app');\r\n\r\n// // Connect to the websocket target specified in the configuration\r\n// vm.$connect()\r\n// // Connect to an alternative websocket URL and Options e.g.\r\n// vm.$connect('ws://localhost:9090/alternative/connection/', { format: 'json' })\r\n// // do stuff with WebSockets\r\n// vm.$disconnect()\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CraftSetting.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CraftSetting.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}